<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>MED fichier: MEDmemFileOpen</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MED fichier
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Documentation&#160;MED</span></a></li>
      <li><a href="pages.html"><span>Guides&#160;d'utilisation</span></a></li>
      <li><a href="modules.html"><span>Guides&#160;de&#160;référence</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a01049.html">Guide de référence du module MEDfile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga9c728192b1e39a31a7da0005fb4a8a41.html#ga9c728192b1e39a31a7da0005fb4a8a41">MEDfileCommentRd</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga08d625f5403fefb9deb7d47f9a915c41.html#ga08d625f5403fefb9deb7d47f9a915c41">MEDfileCommentWr</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gac3e0eb335c4d611cbbeaf7688050f054.html#gac3e0eb335c4d611cbbeaf7688050f054">MEDfileCompatibility</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gae125d3c97a7b1fc07b4cba6abe227280.html#gae125d3c97a7b1fc07b4cba6abe227280">MEDfileExist</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gad5971dbf21f94662221389ad1d1b4d80.html#gad5971dbf21f94662221389ad1d1b4d80">MEDfileName</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gaec83c9561b5640ca32a12e58c5d2e10d.html#gaec83c9561b5640ca32a12e58c5d2e10d">MEDfileNumVersionRd</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gab07b0c564f8bcd9274abe8be40429389.html#gab07b0c564f8bcd9274abe8be40429389">MEDfileObjectExist</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga48b7eb3761d58928eb0e0b12d481e05a.html#ga48b7eb3761d58928eb0e0b12d481e05a">MEDfileObjectsMount</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga295bfb2838ed08bf156ced79e291c7f1.html#ga295bfb2838ed08bf156ced79e291c7f1">MEDfileObjectsMountById</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga73ad912a369c3da7f22caf482093e47b.html#ga73ad912a369c3da7f22caf482093e47b">MEDfileObjectsUnmount</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gab157547245a875e72a53847f64468855.html#gab157547245a875e72a53847f64468855">MEDfileStrVersionRd</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gabe89ecd6d84af8f7bc926c97cf2d3be4.html#gabe89ecd6d84af8f7bc926c97cf2d3be4">MEDfileVersionOpen</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="a01049_ga8855a4aa07a931477671c8c877b6f3ed.html#ga8855a4aa07a931477671c8c877b6f3ed">MEDmemFileOpen</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01049_gad5a6655e312d3e5146f358c42c7c904f.html#gad5a6655e312d3e5146f358c42c7c904f">MEDparFileOpen</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a class="anchor" id="ga8855a4aa07a931477671c8c877b6f3ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> MEDmemFileOpen </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00538.html">med_memfile</a> *const&#160;</td>
          <td class="paramname"><em>memfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a>&#160;</td>
          <td class="paramname"><em>filesync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85">med_access_mode</a>&#160;</td>
          <td class="paramname"><em>accessmode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ouverture d'un fichier MED pour une utilisation en mémoire. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Nom du fichier. </td></tr>
    <tr><td class="paramname">memfile</td><td>fichier mémoire. </td></tr>
    <tr><td class="paramname">filesync</td><td>synchronise ou non le fichier mémoire avec un fichier disque. </td></tr>
    <tr><td class="paramname">accessmode</td><td>Mode d'acces au fichier. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Valeurs retournées</dt><dd>
  <table class="retval">
    <tr><td class="paramname">med_idt</td><td>Identificateur du fichier.</td></tr>
  </table>
  </dd>
</dl>
<p>Cette routine permet de créer, lire ou modifier un fichier mémoire au format MED. Le contenu du fichier mémoire peut-être crée par les appels habituels de l'API MED ou initialisé à partir d'un fichier MED existant.Une fois le fichier mémoire fermé par <a class="el" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>, le fichier mémoire reste disponible pour être transmis et de nouveau ouvert/modifié par un nouvel appel à MEDmemFileOpen. </p><dl class="section user"><dt>Remarques</dt><dd></dd></dl>
<dl class="section user"><dt>Gestion de la mémoire:</dt><dd><ul>
<li>La structure <em>memfile</em> doit impérativement être initialisée à <a class="el" href="a00577_a7e1c067b2760ab9bd794b4e014992d2c.html#a7e1c067b2760ab9bd794b4e014992d2c">MED_MEMFILE_INIT</a>. </li>
<li>Une fois <em>memfile</em> initialisé à <a class="el" href="a00577_a7e1c067b2760ab9bd794b4e014992d2c.html#a7e1c067b2760ab9bd794b4e014992d2c">MED_MEMFILE_INIT</a>, la gestion de l'allocation mémoire peut être laissée à la charge de MED. La désallocation de <em>memfile.app_image_ptr</em> reste à la charge de l'utilisateur. </li>
<li>Si (<em>memfile.app_image_ptr</em> == 0 ) : La place mémoire utilisée par les différents appels medfichier sera allouée par medfichier et accessible par le pointeur <em>medfile.image_ptr</em>. L'emprise mémoire utilisée par l'ensemble des appels à medfichier est indiquée dans <em>memfile.app_image_size</em> au fil des appels. La désallocation est à la charge de l'utilisateur. </li>
<li>Si (<em>memfile.app_image_ptr</em> &lt;&gt; 0) et (<em>memfile.app_image_size</em> &lt;&gt; 0) : L'utilisateur a pré-alloué un emplacement d'acceuil au fichier mémoire, cet emplacement sera utilisé par MED dans les différentes fonctions de l'API. Si la taille réservée est insuffisante, MED réallouera la taille nécessaire et mettra à jour le champ <em>memfile.app_image_size</em>. Ce mécanisme suppose que l'utilisateur n'utilise pas d'alias du pointeur <em>memfile.app_image_ptr</em> de façon concurrente à MED. Il est de la responsabilité de l'utilisateur de prendre connaissance des eventuels changements de taille et de valeur du pointeur. Après l'appel à <a class="el" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>, MED n'utilise plus l'image mémoire. Il est possible de vérifier qu'il n'existe plus d'accès à l'image mémoire en s'assurant que <em>memfile.fapl_ref_count</em> et <em>memfile.vfd_ref_count</em> sont tous les deux nuls. </li>
</ul>
</dd></dl>
<dl class="section user"><dt>Gestion des droits et fichier disque:</dt><dd>Si le paramètre <em>syncfile</em> est à <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a>, <a class="el" href="a01049_ga8855a4aa07a931477671c8c877b6f3ed.html#ga8855a4aa07a931477671c8c877b6f3ed">MEDmemFileOpen</a> ne s'occupera pas de la présence d'un fichier disque de même nom que l'image mémoire. Si le paramètre syncfile est à <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a>, <a class="el" href="a01049_ga8855a4aa07a931477671c8c877b6f3ed.html#ga8855a4aa07a931477671c8c877b6f3ed">MEDmemFileOpen</a> gardera la cohérence entre le fichier disque crée ou déjà présent et l'image mémoire en fonction du mode d'accès demandé.<ul>
<li>Mode <a class="el" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a09bafcc9e6dad89588c12c9d6a9efa12">MED_ACC_RDEXT</a> : Mode interdit.</li>
<li>Mode <a class="el" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85aa23dd1c18b596924d5f50c8402b84c8e">MED_ACC_CREAT</a> : Si <em>filesync</em> == <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> est crée, aucun fichier disque n'est utilisé (un fichier disque de même nom peut exister mais ne sera pas utilisé). Si le fichier mémoire possédait une image MED valide, elle sera réinitialisée. Si <em>filesync</em> == <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> est crée, un nouveau fichier disque de même nom est également crée (un fichier disque de même nom peut déjà exister, il sera alors écrasé). Tous les appels MED seront effectués en mémoire et sur le fichier jusqu'à l'appel de <a class="el" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a> (pas forcément de façon synchrone jusqu'à la fermeture).</li>
<li>Mode <a class="el" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85ab53f10a6b700d1087d7a50710fe29f00">MED_ACC_RDWR</a> : Si <em>filesync</em> == <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> existant et valide est crée qu'un fichier disque de même nom existe ou non. Les appels MED seront effectués uniquement en mémoire. Si <em>filesync</em> == <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> est crée.S'il n'existe pas de fichier disque de même nom, l'image memfile doit exister et être valide; un fichier disque de même nom est crée et maintenu en cohérence (il faut au moins un appel MED en écriture/création pour que la synchronisation du fichier se fasse).S'il existe un fichier disque de même nom, l'image <em>memfile</em> est réinitialisée par le contenu du fichier. La cohérence est maintenue entre fichier mémoire et fichier disque.</li>
<li>Mode <a class="el" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a> : <em>filesync</em> = <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a> | <a class="el" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a> : Le fichier mémoire est initialisé à partir d' un fichier disque de même nom (forcément existant). Les appels MED en lecture seront effectués uniquement en mémoire, le fichier restera dans son état intial. Les appels MED en écriture échoueront. </li>
</ul>
</dd></dl>

<p>Définition à la ligne <a class="el" href="a00715_source.html#l00043">43</a> du fichier <a class="el" href="a00715_source.html">MEDmemFileOpen.c</a>.</p>

</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré le Lundi 10 Décembre 2018 18:40:49 pour MED fichier par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
