<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>MED fichier: Concepts et fonctionnalit&eacute;s avanc&eacute;s sur les maillages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MED fichier
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Documentation&#160;MED</span></a></li>
      <li class="current"><a href="pages.html"><span>Guides&#160;d'utilisation</span></a></li>
      <li><a href="modules.html"><span>Guides&#160;de&#160;référence</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Concepts et fonctionnalit&eacute;s avanc&eacute;s sur les maillages </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="____Concepts et fonctionnalit&eacute;s avanc&eacute;s sur les maillages____"></a> </p>
<p><a href="#1.">Créer et lire dans un maillage des éléments de type polygones quelconques</a> </p>
<p><a href="#1.1">Créer et lire dans un maillage des éléments de type polyèdres quelconques</a> </p>
<p><a href="#2.">Créer et lire un maillage avec gestion des profils sur les entités</a> </p>
<p><a href="#3.">Créer et lire un maillage évolutif</a> </p>
<p><a href="#4.">Créer et lire une équivalence entre les entités d'un maillage</a> </p>
<p><a href="#5.">Créer et lire un maillage avec des éléments de structure</a> </p>
<p><a href="#6.">Ecriture et lecture en parallèle par la décomposition de domaine </a> </p>
<p><br />
<br />
</p>
<h1><a class="anchor" id="1."></a>Créer et lire dans un maillage des éléments de type polygones quelconques</h1>
<p><br />
</p>
<p>En plus des types géométriques prédéfinis (exemples : MED_SEG2, MED_SEG3, MED_TRIA3, ...), il est possible de définir dans un maillage non structuré des éléments qui correspondent à des polygones (mailles ou faces) quelconques. </p>
<p>Pour décrire la géométrie et la connectivité des mailles/faces polygones quelconques, il s'agit d'adopter la convention suivante. L'ordre de stockage des polygones est libre -i.e. n'est pas régi par l'ordre des types géométriques (donné par le nombre de sommets). Par exemple, si on a 2 polygones à 5 sommets (P5) et 1 polygone à 6 sommets (P6), on peut stocker la connectivité de ces éléments dans l'ordre suivant : P5, P6, P5. On accède à la connectivité de chaque polygone par l'intermédiaire d'un tableau d'indexation. Pour notre exemple cela revient à avoir les 2 tableaux suivants (les indexations dans MED débutent par convention à l'indice 1) : </p>
<div class="image">
<img src="./png/exemple_connectivite_polygones.png"  name="Image3" align="BOTTOM" width="660" height="224" border="0"/>
</div>
 <p>En connectivité nodale, les entiers stockés dans le tableau de connectivité correspondent à des numéros de noeuds alors qu'en connectivité descendante, ils correspondent à des numéros d'arêtes. </p>
<p><br />
</p>
<h2>Exemple de polygone en connectivité nodale</h2>
<p>Voici l'exemple de deux polygones. Les deux polygones sont deux hexagones symétriques. Ils partagent une arête commune la [4,7] qui doit être décrite pour chaque polygone.</p>
<div class="image">
<img src="UsesCase_MEDmesh_13_doc.png" alt="UsesCase_MEDmesh_13_doc.png"/>
</div>
<p>Le tableau <em>index</em> des polygones est donc le suivant : </p><table class="doxtable">
<caption id="index" align="bottom">index</caption>
<tr>
<th>P1</th><th>P2 </th></tr>
<tr>
<td>1</td><td>7</td><td>13  </td></tr>
</table>
<p>Le tableau <em>connectivity</em> contient l'ensemble des noeuds utilisés par les arêtes des polygones </p><table class="doxtable">
<caption id="connectivity" align="bottom">connectivity</caption>
<tr>
<th colspan="6">P1 </th><th colspan="6">P2  </th></tr>
<tr>
<th>1</th><th>4</th><th>7</th><th>9</th><th>6</th><th>3 </th><th>2</th><th>5</th><th>8</th><th>10</th><th>7</th><th>4  </th></tr>
</table>
<p><br />
</p>
<h2>Exemple d'utilisation de l'API MED pour l'écriture de polygones</h2>
<p>L'écriture de la connectivité des polygones d'un maillage s'appuie sur une routine dédiée <a class="el" href="a01055_gad376c2d3d0e4d23604b2e3d148a8e796.html#gad376c2d3d0e4d23604b2e3d148a8e796">MEDmeshPolygonWr</a> / <a class="el" href="a00716_a4db0ef0f4babe52baa64350185067da3.html#a4db0ef0f4babe52baa64350185067da3">mmhpgw</a> qui prend en paramètres les tableaux d'indexation et de connectivité. A noter que le seul mode de stockage possible du tableau de connectivité est le mode non entrelacé. </p>
<p>Une fois le maillage non structuré crée, ici en dimension 2 :  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga6007c3f1a62732e7a46c5eca232be78a.html#ga6007c3f1a62732e7a46c5eca232be78a">MEDmeshCr</a>(fid, meshname, spacedim, meshdim,</div>
<div class="line">                <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1a3719e53a4838d222f0a58148292fda41">MED_UNSTRUCTURED_MESH</a>, <span class="stringliteral">&quot;A 2D mesh with 2 polygons&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798ae896b6adfbde9870b4e875e5167eddd0">MED_SORT_DTIT</a>, <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204da682ef7f1042079519664eae87f90297e">MED_CARTESIAN</a>, axisname, unitname) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01020.html">Fichier d'exemple associé</a></small></p>
<p>la définition des noeuds s'effectue classiquement :  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab2a6fcbbb0dfb0dba573320ed07f503b.html#gab2a6fcbbb0dfb0dba573320ed07f503b">MEDmeshNodeCoordinateWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, <a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>, <a class="code" href="a00577_a609885580ce660eb5b7c80074d64f93f.html#a609885580ce660eb5b7c80074d64f93f">MED_UNDEF_DT</a>,</div>
<div class="line">                              <a class="code" href="a00577_a0d451e4036adbb12b14cb16d7db0c37d.html#a0d451e4036adbb12b14cb16d7db0c37da9a1509b3f93e5915a24f555890c73ee1">MED_FULL_INTERLACE</a>, nnodes, coordinates) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01020.html">Fichier d'exemple associé</a></small></p>
<p>vient ensuite l'écriture des polygones par les tableaux <em>index</em> et <em>connectivity</em> :  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gad376c2d3d0e4d23604b2e3d148a8e796.html#gad376c2d3d0e4d23604b2e3d148a8e796">MEDmeshPolygonWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, <a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>, <a class="code" href="a00577_a609885580ce660eb5b7c80074d64f93f.html#a609885580ce660eb5b7c80074d64f93f">MED_UNDEF_DT</a>,</div>
<div class="line">                       <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>, <a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>, indexsize, index, connectivity) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01020.html">Fichier d'exemple associé</a></small></p>
<p><br />
</p>
<h2>Exemple d'utilisation de l'API MED pour la lecture de polygones</h2>
<p>La lecture de la connectivité des polygones d'un maillage s'effectue tout d'abord par deux appels à la fonction <a class="el" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a> / <a class="el" href="a00716_ad8041d49270c560eb727621625424759.html#ad8041d49270c560eb727621625424759">mmhnme</a>. </p>
<p>Le premier appel concernant les polygones permet de récupérer la taille du tableau d'indexation (le nombre de polygone présent dans le maillage est égal à la taille de ce tableau -1).  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((indexsize = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,meshname,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,<a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>,</div>
<div class="line">                                  <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>,<a class="code" href="a00577_a85eec62d6ac09df04ee4e0ca89586273.html#a85eec62d6ac09df04ee4e0ca89586273">MED_POLYGON</a>,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61baeeb4405ba174bcfebed019cf268ca8f2">MED_INDEX_NODE</a>,<a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>,</div>
<div class="line">                                  &amp;coordinatechangement, &amp;geotransformation)) &lt; 0)</div>
<div class="line">  npoly = indexsize-1;</div>
</div><!-- fragment --> <small><a class="el" href="a01022.html">Fichier d'exemple associé</a></small></p>
<p>Le second appel permet de lire la taille du tableau de connectivité pour lui allouer la mémoire necessaire.  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((connectivitysize = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,meshname,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,<a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>,</div>
<div class="line">                                         <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>,<a class="code" href="a00577_a85eec62d6ac09df04ee4e0ca89586273.html#a85eec62d6ac09df04ee4e0ca89586273">MED_POLYGON</a>,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bac845229e0179819897411d7cb9186824">MED_CONNECTIVITY</a>,<a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>,</div>
<div class="line">                                         &amp;coordinatechangement, &amp;geotransformation)) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01022.html">Fichier d'exemple associé</a></small></p>
<p>Enfin la routine <a class="el" href="a01055_ga46e9af0a7a67660e728665c4b8e65f61.html#ga46e9af0a7a67660e728665c4b8e65f61">MEDmeshPolygonRd</a> / <a class="el" href="a00716_a24a3b956d5dcf009aa28eb4f85918f1d.html#a24a3b956d5dcf009aa28eb4f85918f1d">mmhpgr</a> va lire les tableaux d'indexation et de connectivité.  <div class="fragment"><div class="line">  index        = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*indexsize);</div>
<div class="line">  connectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*connectivitysize);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga46e9af0a7a67660e728665c4b8e65f61.html#ga46e9af0a7a67660e728665c4b8e65f61">MEDmeshPolygonRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, <a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>, MED_NODAL, index, connectivity) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01022.html">Fichier d'exemple associé</a></small></p>
<p><br />
<br />
</p>
<h1><a class="anchor" id="1.1"></a>Créer et lire dans un maillage des éléments de type polyèdres quelconques</h1>
<p><br />
</p>
<h2>Polyèdres en connectivité nodale</h2>
<p>En plus des types géométriques prédéfinis (exemples : MED_SEG2, MED_SEG3, MED_TRIA3, ...), il est possible de définir dans un maillage non structuré des éléments qui correspondent à des (mailles) polyèdres quelconques. </p>
<p>Pour décrire la géométrie et la connectivité des mailles polyèdres quelconques, il s'agit d'adopter la convention suivante. Pour la connectivité nodale, on accède à la connectivité via un système de double indexation : </p><ul>
<li>un premier tableau d'indexation <em>faceindex</em> renvoie à la liste des faces de chaque polyèdre </li>
<li>un second tableau <em>nodeindex</em> renvoie pour chaque face à la liste des noeuds qui la compose</li>
</ul>
<p>Voici un schéma explicitant l'utilisation des trois tableaux dans la connectivité nodale de <b>n</b> polyèdres : </p>
<div class="image">
<img src="./png/exemple_connectivite_nodale_polyedres.svg"  name="Image1"/>
</div>
<p>A noter que les faces communes sont décrites 2 fois (mêmes listes de noeuds mais orientations différentes) et la normale des faces doit être extérieure. </p>
<p><br />
</p>
<h2>Exemple de polyèdres en connectivité nodale</h2>
<p>Voici l'exemple d'une boîte constituée de 2 polyèdres. Le premier polyèdre (en bas à gauche) est constitué de 6 faces, le second (en haut à droite) de 7.</p>
<div class="image">
<img src="UsesCase_MEDmesh_15_doc.png" alt="UsesCase_MEDmesh_15_doc.png"/>
</div>
<p> Le tableau <em>faceindex</em> des polyèdres est donc le suivant : </p><table class="doxtable">
<caption id="faceindex" align="bottom">faceindex</caption>
<tr>
<th>P1</th><th>P2 </th></tr>
<tr>
<td>1</td><td>7</td><td>14  </td></tr>
</table>
<p>Le tableau <em>nodeindex</em> permet de trouver les noeuds de chaque face dans le tableau <em>connectivity</em> </p><table class="doxtable">
<caption id="nodeindex" align="bottom">nodeindex</caption>
<tr>
<th>F1.1</th><th>F1.2</th><th>F1.3</th><th>F1.4</th><th>F1.5</th><th>F1.6 </th><th>F2.1</th><th>F2.2</th><th>F2.3</th><th>F2.4</th><th>F2.5</th><th>F2.6</th><th>F2.7 </th></tr>
<tr>
<td>1</td><td>6</td><td>12</td><td>17</td><td>20</td><td>23 </td><td>27</td><td>33</td><td>36</td><td>42</td><td>47</td><td>53</td><td>56</td><td>59  </td></tr>
</table>
<p>Le tableau <em>connectivity</em> contient l'ensemble des noeuds utilisés par les faces des polyèdres</p>
<table class="doxtable">
<caption id="connectivity" align="bottom">connectivity</caption>
<tr>
<th colspan="5">P1.1 </th><th colspan="6">P1.2 </th><th colspan="5">P1.3 </th><th colspan="3">P1.4 </th><th colspan="3">P1.5 </th><th colspan="4"><p class="starttd">P1.6</p>
<p class="endtd"></p>
</th><th colspan="6">P2.1 </th><th colspan="3">P2.2 </th><th colspan="6">P2.3 </th><th colspan="5">P2.4 </th><th colspan="6">P2.5 </th><th colspan="3">P2.6 </th><th colspan="3"><p class="starttd">P2.7</p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>1</td><td>2 </td><td>9 </td><td>3 </td><td>10 </td><td>1</td><td>12 </td><td>5 </td><td>6 </td><td>11</td><td>2 </td><td>2</td><td>11 </td><td>6 </td><td>3 </td><td>9 </td><td>3</td><td>6 </td><td>5 </td><td>3</td><td>5 </td><td>10 </td><td>1</td><td>10 </td><td>5 </td><td><p class="starttd">12</p>
<p class="endtd"></p>
</td><td>3</td><td>13 </td><td>7 </td><td>8 </td><td>15</td><td>4 </td><td>3</td><td>4 </td><td>10 </td><td>4</td><td>15 </td><td>8 </td><td>16 </td><td>5</td><td>10 </td><td>3</td><td>6 </td><td>14 </td><td>7 </td><td>13 </td><td>5</td><td>16 </td><td>8 </td><td>7 </td><td>14</td><td>6 </td><td>3</td><td>10 </td><td>5 </td><td>3</td><td>5 </td><td>6  </td></tr>
</table>
<p><br />
</p>
<h2>Exemple d'utilisation de l'API MED pour l'écriture de polyèdres en connectivité nodale</h2>
<p>L'écriture de la connectivité des polyèdres d'un maillage s'appuie sur une routine dédiée <a class="el" href="a01055_ga2b52e519ae9c3dc18c55a82c2dffbd27.html#ga2b52e519ae9c3dc18c55a82c2dffbd27">MEDmeshPolyhedronWr</a> / <a class="el" href="a00716_af49aab1a09801eb533e24300b0391377.html#af49aab1a09801eb533e24300b0391377">mmhphw</a> qui prend en paramètres les tableaux d'indexation et de connectivité. A noter que le seul mode de stockage possible du tableau de connectivité est le mode non entrelacé. </p>
<p>L'exemple suivant propose l'écriture de la connectivité de mailles polyèdres en connectivité nodale. </p>
<p>Après la création classique d'un maillage non structuré :  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga6007c3f1a62732e7a46c5eca232be78a.html#ga6007c3f1a62732e7a46c5eca232be78a">MEDmeshCr</a>(fid, meshname, spacedim, meshdim,</div>
<div class="line">                <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1a3719e53a4838d222f0a58148292fda41">MED_UNSTRUCTURED_MESH</a>, <span class="stringliteral">&quot;A 3D mesh with 2 polyhedron&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798ae896b6adfbde9870b4e875e5167eddd0">MED_SORT_DTIT</a>,</div>
<div class="line">                <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204da682ef7f1042079519664eae87f90297e">MED_CARTESIAN</a>, axisname, unitname) &lt; 0) {</div>
</div><!-- fragment --> <small><a class="el" href="a01024.html">Fichier d'exemple associé</a></small></p>
<p>Les noeuds utilisés par les polyèdres sont crées :  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab2a6fcbbb0dfb0dba573320ed07f503b.html#gab2a6fcbbb0dfb0dba573320ed07f503b">MEDmeshNodeCoordinateWr</a>(fid, meshname,</div>
<div class="line">            <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, <a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>, <a class="code" href="a00577_a609885580ce660eb5b7c80074d64f93f.html#a609885580ce660eb5b7c80074d64f93f">MED_UNDEF_DT</a>,</div>
<div class="line">            <a class="code" href="a00577_a0d451e4036adbb12b14cb16d7db0c37d.html#a0d451e4036adbb12b14cb16d7db0c37da9a1509b3f93e5915a24f555890c73ee1">MED_FULL_INTERLACE</a>, nnodes, coordinates) &lt; 0) {</div>
</div><!-- fragment --> <small><a class="el" href="a01024.html">Fichier d'exemple associé</a></small></p>
<p>Enfin, la connectivité des polyèdres est enregistrée :  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga2b52e519ae9c3dc18c55a82c2dffbd27.html#ga2b52e519ae9c3dc18c55a82c2dffbd27">MEDmeshPolyhedronWr</a>(fid, meshname,</div>
<div class="line">                          <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, <a class="code" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a>, <a class="code" href="a00577_a609885580ce660eb5b7c80074d64f93f.html#a609885580ce660eb5b7c80074d64f93f">MED_UNDEF_DT</a>,</div>
<div class="line">                          <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>, <a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>,</div>
<div class="line">                          faceindexSize, faceindex,</div>
<div class="line">                          nodeindexSize, nodeindex,</div>
<div class="line">                          connectivity) &lt; 0) {</div>
</div><!-- fragment --> <small><a class="el" href="a01024.html">Fichier d'exemple associé</a></small></p>
<p>A noter qu'au même titre que les autres entités d'un maillage, les polyèdres (tout comme les polygones) portent un numéro de famille (0 par défaut) et peuvent porter un nom ou un numéro optionnel. </p>
<p><br />
</p>
<h2>Exemple d'utilisation de l'API MED pour la lecture de polyèdres en connectivité nodale</h2>
<p>La lecture de la connectivité des polyèdres d'un maillage demande une approche spécifique. Il est d'abord nécessaire d'appeler plusieurs fois la routine <a class="el" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a> / <a class="el" href="a00716_ad8041d49270c560eb727621625424759.html#ad8041d49270c560eb727621625424759">mmhnme</a> afin de récupérer la taille des tableaux d'indexation.</p>
<p>Après la lecture du nombre total de noeuds présent dans le maillage  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((nnodes = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>, <a class="code" href="a00577_aae1e86a4a1fce025bdadecb5e3e4a705.html#aae1e86a4a1fce025bdadecb5e3e4a705">MED_POINT1</a>,</div>
<div class="line">             <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, <a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a2b1e772016688b78b808e96a44d1ee02">MED_NO_CMODE</a>,&amp;coordinatechangement, &amp;geotransformation)) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01025.html">Fichier d'exemple associé</a></small></p>
<p>nous lisons le nombre de polyèdres ( égal à la taille du tableau <a class="el" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61ba41dcc4a6a135f286da422482e3fd2021">MED_INDEX_FACE</a> -1 )  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((faceindexsize = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,meshname,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">          <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>,<a class="code" href="a00577_ae08587b134662b257542c6b64e6a998a.html#ae08587b134662b257542c6b64e6a998a">MED_POLYHEDRON</a>,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61ba41dcc4a6a135f286da422482e3fd2021">MED_INDEX_FACE</a>,<a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>,</div>
<div class="line">          &amp;coordinatechangement, &amp;geotransformation)) &lt; 0)</div>
<div class="line">  npoly = faceindexsize-1;</div>
</div><!-- fragment --> <small><a class="el" href="a01025.html">Fichier d'exemple associé</a></small></p>
<p>et la taille du tableau d'indexes des noeuds <a class="el" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61baeeb4405ba174bcfebed019cf268ca8f2">MED_INDEX_NODE</a>  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((nodeindexsize = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,meshname,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">          <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>,<a class="code" href="a00577_ae08587b134662b257542c6b64e6a998a.html#ae08587b134662b257542c6b64e6a998a">MED_POLYHEDRON</a>,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61baeeb4405ba174bcfebed019cf268ca8f2">MED_INDEX_NODE</a>,<a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>,</div>
<div class="line">          &amp;coordinatechangement, &amp;geotransformation)) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01025.html">Fichier d'exemple associé</a></small></p>
<p>nous lisons enfin la taille du tableau <em>connectivity</em> contentant les numéros des noeuds utilisés par les faces des polyèdres  <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((connectivitysize = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,meshname,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">           <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>,<a class="code" href="a00577_ae08587b134662b257542c6b64e6a998a.html#ae08587b134662b257542c6b64e6a998a">MED_POLYHEDRON</a>,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bac845229e0179819897411d7cb9186824">MED_CONNECTIVITY</a>,<a class="code" href="a00577_afcd26ca66a179b9aa82f5c90602c4ed8.html#afcd26ca66a179b9aa82f5c90602c4ed8a4ae92e7de0898383577cbba640006baa">MED_NODAL</a>,</div>
<div class="line">           &amp;coordinatechangement, &amp;geotransformation)) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01025.html">Fichier d'exemple associé</a></small></p>
<p>La routine <a class="el" href="a01055_ga3a19e5f300f10f5e9b52c9622d94c6f9.html#ga3a19e5f300f10f5e9b52c9622d94c6f9">MEDmeshPolyhedronRd</a> / <a class="el" href="a00716_a387172c14a1b0c50c82cfb3abd2749a0.html#a387172c14a1b0c50c82cfb3abd2749a0">mmhphr</a> va permettre de lire les tableaux d'indexation et de connectivité  <div class="fragment"><div class="line">  faceindex = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*faceindexsize);</div>
<div class="line">  nodeindex = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nodeindexsize);</div>
<div class="line">  connectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*connectivitysize);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga3a19e5f300f10f5e9b52c9622d94c6f9.html#ga3a19e5f300f10f5e9b52c9622d94c6f9">MEDmeshPolyhedronRd</a>(fid,meshname,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,MED_CELL,MED_NODAL,</div>
<div class="line">                          faceindex,nodeindex,connectivity) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a01025.html">Fichier d'exemple associé</a></small></p>
<p><br />
</p>
<h2>Polyèdres en connectivité descendante</h2>
<p>Pour la connectivité descendante, un seul niveau d'indexation suffit (faceindex). </p><ul>
<li>Le tableau <em>connectivity</em> contient les numéros des faces. </li>
<li>Le tableau <em>nodeindex</em> contient alors le type géométrique de chaque face (exemple : MED_TRIA3).</li>
</ul>
<p>A noter que dans ce cas, nodeIndexSize == connectivitySize . </p>
<p>Voici un schéma explicitant l'utilisation des trois tableaux dans la connectivité descendante de <b>n</b> polyèdres :</p>
<div class="image">
<img src="./png/exemple_connectivite_descendante_polyedres.svg"  name="Image2"/>
</div>
<p><br />
<br />
</p>
<h1><a class="anchor" id="2."></a>Créer et lire un maillage avec gestion des profils sur les entités</h1>
<p>Un profil sur les entités d'un maillage permet l'écriture ou la lecture sur un sous-ensemble de ces entités. Un profil est un objet stocké dans un fichier MED. Un profil est un tableau de numéros d'entités (numérotation MED relative à un type géométrique d'élément commen&ccedil;ant à 1) associés aux valeurs à traiter. La définition d'un profil se fait selon les conventions suivantes : les numéros d'entité utilisés pour définir un profil sont ceux de la numérotation implicite (ordre d'apparition des entités par ordre croissant). Un profil est une liste compacte : on ne met que les numéros représentatifs. Exemple : sur un maillage de 30 noeuds, si on a un champ portant sur les noeuds de numéros de référence 4, 5 et 12, le profil correspondant sera la liste (4,5,12).</p>
<p>La routine <a class="el" href="a01057_gaf7ec6ed01898dcfe98556f399ed044d1.html#gaf7ec6ed01898dcfe98556f399ed044d1">MEDprofileWr</a> / <a class="el" href="a00806_a946e7c43a115f9a0357571ceaceda78a.html#a946e7c43a115f9a0357571ceaceda78a">mpfprw</a> permet d'écrire un profil dans un fichier MED. Un profil est identifié par son nom (cha&icirc;ne de taille <a class="el" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a> caractères). </p>
<p>A la lecture, la routine <a class="el" href="a01057_ga984674c8806c7374a95cd451219f8e81.html#ga984674c8806c7374a95cd451219f8e81">MEDnProfile</a> / <a class="el" href="a00806_a4bf5d21abc7cf050d0d1cba12ebb385f.html#a4bf5d21abc7cf050d0d1cba12ebb385f">mpfnpf</a> va lire le nombre de profil dans un fichier. Il s'agit ensuite d'itérer sur chaque profil afin de récupérer pour chacun d'eux : le nom et la taille du tableau du profil avec la routine <a class="el" href="a01057_ga58f36a5e3b4fb4a2e510b421c6608102.html#ga58f36a5e3b4fb4a2e510b421c6608102">MEDprofileInfo</a> / <a class="el" href="a00806_ac4caf2428491261b2eee80bf56db70c7.html#ac4caf2428491261b2eee80bf56db70c7">mpfpfi</a>, le tableau des numéros d'entités avec <a class="el" href="a01057_ga93bec578fad63ceaaae0d7ea511d7a3e.html#ga93bec578fad63ceaaae0d7ea511d7a3e">MEDprofileRd</a> / <a class="el" href="a00806_a3c0b90345398a5d111b92e010144a87f.html#a3c0b90345398a5d111b92e010144a87f">mpfprr</a>. </p>
<p>Lorsqu'on conna&icirc;t le nom du profil, la routine permet <a class="el" href="a01057_ga2871de707744621f6a29a29633cc2e7b.html#ga2871de707744621f6a29a29633cc2e7b">MEDprofileSizeByName</a> / <a class="el" href="a00806_a8337e08bd4acc8530a18b4de1407cff5.html#a8337e08bd4acc8530a18b4de1407cff5">mpfpsn</a> de lire la taille du tableau.</p>
<p>Au niveau de l'API sur les maillages, l'utilisation des profils est possible en écriture ou en lecture des coordonées des noeuds et de la connectivité des éléments d'un maillage non structuré avec les routines : <a class="el" href="a01055_ga9dee3d76d357b2aa31e562406d151f70.html#ga9dee3d76d357b2aa31e562406d151f70">MEDmeshNodeCoordinateWithProfileWr</a> / <a class="el" href="a00716_adb3dbf89cb22d5e80a4ded7d6a35adf8.html#adb3dbf89cb22d5e80a4ded7d6a35adf8">mmhcow</a> pour l'écriture des coordonnées, <a class="el" href="a01055_ga069faade0b33a1d245a20160e7f33ce5.html#ga069faade0b33a1d245a20160e7f33ce5">MEDmeshNodeCoordinateWithProfileRd</a> / <a class="el" href="a00716_a31b179e69893200d6625b4c81729e0bc.html#a31b179e69893200d6625b4c81729e0bc">mmhcor</a> pour la lecture des coordonnées, <a class="el" href="a01055_gade9c04c83f2909bfa25094f94ec0f6d2.html#gade9c04c83f2909bfa25094f94ec0f6d2">MEDmeshElementConnectivityWithProfileWr</a> / <a class="el" href="a00716_af391b9b5a4c3565b63ffb5d7a1f36bb5.html#af391b9b5a4c3565b63ffb5d7a1f36bb5">mmhypw</a> pour l'écriture des connectivités, <a class="el" href="a01055_ga3ec94d39504eccf0aa92af6e8f406718.html#ga3ec94d39504eccf0aa92af6e8f406718">MEDmeshElementConnectivityWithProfileRd</a> / <a class="el" href="a00716_a1442ae230e88dbd3a9a7b6b8c88d61e3.html#a1442ae230e88dbd3a9a7b6b8c88d61e3">mmhypr</a> pour la lecture des connectivités. A noter également la routine <a class="el" href="a01055_ga2b875dddcf5922d6143c72cb1e0924cf.html#ga2b875dddcf5922d6143c72cb1e0924cf">MEDmeshnEntityWithProfile</a> / <a class="el" href="a00716_ad8572227573582320220320a354fb2cd.html#ad8572227573582320220320a354fb2cd">mmhnep</a> qui peut récupérer le nombre d'entité à lire selon un profil donné. </p>
<p><a class="anchor" id="a3f7b3a3c5ddcaba3fa1741a367503c8da285ff6474ec39fcb4c49b66a9376ec92"></a> Pour toutes ces routines, il est possible de spécifier le mode de stockage des tableaux de coordonnées ou de connectivité en mémoire. Deux modes sont possibles : le mode <a class="el" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a> indique que le stockage utilisé contient en mémoire toutes les valeurs relatives à toutes les entités d'un même type ; le mode <a class="el" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a> indique que le stockage utilisé est compact et ne contient en mémoire que le sous-ensemble de valeurs relatives au profil.</p>
<p><br />
<br />
</p>
<h1><a class="anchor" id="3."></a>Créer et lire un maillage évolutif</h1>
<p>Dans MED, un maillage peut évoluer par étape, chaque étape étant estampillée par un couple &lt;pas de temps, numéro d'ordre&gt; à l'instar des étapes de calcul d'un champ de résultat. </p>
<p>Une évolution peut porter un maillage déformable à topologie constante (les coordonnées des noeuds ou d'un sous-ensemble des noeuds sont modifiées à chaque étape), un maillage à déformation solide (selon une matrice de transformation pour chaque étape applicable aux coordonnées des noeuds), un maillage redéfinissable (les connectivités des mailles changent au cours des étapes).</p>
<p>A la création d'une étape de calcul, les informations de l'étape précédente inchangées sont automatiquement reportées : coordonnées, connectivités, numéros optionnels, noms optionnels, numéros de famille. Il est donc possible de créer une étape d'évolution sans avoir à y reporter toutes ces données. L'utilisateur a la responsabilité de maintenir la cohérence des informations covariantes au cours des différentes étapes.</p>
<p>A noter qu'un champ de résultat repose désormais sur une étape d'évolution existante d'un maillage (par défaut l'étape initiale &lt;MED_NO_DT, MED_NO_IT&gt;). Il est nécessaire de stocker le maillage initial &lt;MED_NO_DT, MED_NO_IT&gt; avant toute évolution. </p>
<p>Au cours des évolutions d'un maillage, les types géométriques d'éléments doivent rester identiques. Si de nouveaux types géométriques apparaissent, il faut créer un nouveau maillage.</p>
<p>Pour ce qui concerne l'écriture des maillages déformables à topologie constante, il faut utiliser la routine <a class="el" href="a01055_ga9dee3d76d357b2aa31e562406d151f70.html#ga9dee3d76d357b2aa31e562406d151f70">MEDmeshNodeCoordinateWithProfileWr</a> / <a class="el" href="a00716_adb3dbf89cb22d5e80a4ded7d6a35adf8.html#adb3dbf89cb22d5e80a4ded7d6a35adf8">mmhcow</a> en passant en paramètre le pas de temps et ou le numéro d'ordre correspondant à l'étape, le profil sélectionnant les noeuds dont les coordonnées sont modifiées, le tableau des nouvelles coordonnées.</p>
<p>Le cas d'utilisation suivant après création du maillage initial, créée 2 évolutions successives de sous-ensembles des coordonnées des noeuds du maillage. </p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *  How to create an unstructured mesh</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  Use case 6 : a 2D unstructured mesh with the following features</span></div>
<div class="line"><span class="comment"> *  computin steps, profiles and nodes coordinates evolution.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> meshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;2D unstructured mesh&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> spacedim = 2;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshdim = 2;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> axisname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;x               y               &quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> unitname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;cm              cm              &quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> initial_coordinates[30] = { 2.,1.,  7.,1.,  12.,1.,  17.,1.,  22.,1.,</div>
<div class="line">                                              2.,6.,  7.,6.,  12.,6.,  17.,6.,  22.,6.,</div>
<div class="line">                                              2.,11., 7.,11., 12.,11., 17.,11., 22.,11.};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnodes = 15;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> triaconnectivity[24] = { 1,7,6,   2,7,1,  3,7,2,   8,7,3,</div>
<div class="line">                                         13,7,8, 12,7,13, 11,7,12, 6,7,11 };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ntria3 = 8;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> quadconnectivity[16] = {3,4,9,8,    4,5,10,9,</div>
<div class="line">                                        15,14,9,10, 13,8,9,14};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nquad4 = 4;</div>
<div class="line">  <span class="comment">/* new coordinates (step 1) for nodes 13, 14 and 15 */</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> new_coordinates_step1 [6] = { 12.,15., 17.,15., 22.,15.};</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> profile1name[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;UPPER_QUAD4_PROFILE&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profile1[3] = {13, 14, 15};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profile1size = 3;</div>
<div class="line">  <span class="comment">/* new coordinates (step 2) for nodes 8, 9 and 10 */</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> new_coordinates_step2 [6] = { 12.,10., 17.,10., 22.,10.};</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> profile2name[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;MIDDLE_QUAD4_PROFILE&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profile2[3] = {8, 9, 10};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profile2size = 3;</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* open MED file */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDmesh_6.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85aa23dd1c18b596924d5f50c8402b84c8e">MED_ACC_CREAT</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : file creation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* write a comment in the file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga08d625f5403fefb9deb7d47f9a915c41.html#ga08d625f5403fefb9deb7d47f9a915c41">MEDfileCommentWr</a>(fid,<span class="stringliteral">&quot;A 2D unstructured mesh : 15 nodes, 12 cells&quot;</span>) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write file description ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* create the profiles in the file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01057_gaf7ec6ed01898dcfe98556f399ed044d1.html#gaf7ec6ed01898dcfe98556f399ed044d1">MEDprofileWr</a>(fid, profile1name, profile1size, profile1 ) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : create profile ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01057_gaf7ec6ed01898dcfe98556f399ed044d1.html#gaf7ec6ed01898dcfe98556f399ed044d1">MEDprofileWr</a>(fid, profile2name, profile2size, profile2 ) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : create profile ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* mesh creation : a 2D unstructured mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga6007c3f1a62732e7a46c5eca232be78a.html#ga6007c3f1a62732e7a46c5eca232be78a">MEDmeshCr</a>(fid, meshname, spacedim, meshdim, <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1a3719e53a4838d222f0a58148292fda41">MED_UNSTRUCTURED_MESH</a>,</div>
<div class="line">                <span class="stringliteral">&quot;A 2D unstructured mesh&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,MED_SORT_DTIT,MED_CARTESIAN, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : mesh creation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* initial nodes coordinates in a cartesian axis in full interlace mode</span></div>
<div class="line"><span class="comment">     (X1,Y1, X2,Y2, X3,Y3, ...)</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga9dee3d76d357b2aa31e562406d151f70.html#ga9dee3d76d357b2aa31e562406d151f70">MEDmeshNodeCoordinateWithProfileWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                         <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, <a class="code" href="a00577_aaa89a5e5e6d32de69614b70cf74e29cc.html#aaa89a5e5e6d32de69614b70cf74e29cc">MED_NO_PROFILE</a>,</div>
<div class="line">                                         MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                         nnodes, initial_coordinates) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* cells connectiviy is defined in nodal mode */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gade9c04c83f2909bfa25094f94ec0f6d2.html#gade9c04c83f2909bfa25094f94ec0f6d2">MEDmeshElementConnectivityWithProfileWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                              MED_CELL, <a class="code" href="a00577_a4a1eb7ba296742a6f5eb8b5b23b39670.html#a4a1eb7ba296742a6f5eb8b5b23b39670">MED_TRIA3</a>, MED_NODAL,</div>
<div class="line">                                              <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, <a class="code" href="a00577_aaa89a5e5e6d32de69614b70cf74e29cc.html#aaa89a5e5e6d32de69614b70cf74e29cc">MED_NO_PROFILE</a>,</div>
<div class="line">                                              MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                              ntria3, triaconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : triangular cells connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gade9c04c83f2909bfa25094f94ec0f6d2.html#gade9c04c83f2909bfa25094f94ec0f6d2">MEDmeshElementConnectivityWithProfileWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                              MED_CELL, <a class="code" href="a00577_a24ea9c52f5bde41d9a072925249ec06c.html#a24ea9c52f5bde41d9a072925249ec06c">MED_QUAD4</a>, MED_NODAL,</div>
<div class="line">                                              <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, <a class="code" href="a00577_aaa89a5e5e6d32de69614b70cf74e29cc.html#aaa89a5e5e6d32de69614b70cf74e29cc">MED_NO_PROFILE</a>,</div>
<div class="line">                                              MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                              nquad4, quadconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : quadrangular cells connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * Mesh deformation (nodes coordinates) in 2 steps</span></div>
<div class="line"><span class="comment">   * The nodes modified are identified by a profile</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  <span class="comment">/* STEP 1 : dt1 = 5.5, it = 1*/</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga9dee3d76d357b2aa31e562406d151f70.html#ga9dee3d76d357b2aa31e562406d151f70">MEDmeshNodeCoordinateWithProfileWr</a>(fid, meshname, 1, 1, 5.5,</div>
<div class="line">                                         <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, profile1name,</div>
<div class="line">                                         MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                         nnodes, new_coordinates_step1 ) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* STEP 2 : dt2 = 8.9, it = 1*/</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga9dee3d76d357b2aa31e562406d151f70.html#ga9dee3d76d357b2aa31e562406d151f70">MEDmeshNodeCoordinateWithProfileWr</a>(fid, meshname, 2, 1, 8.9,</div>
<div class="line">                                         <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, profile2name,</div>
<div class="line">                                         MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                         nnodes, new_coordinates_step2 ) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* create family 0 : by default, all mesh entities family number is 0 */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01047_ga0873b54d0dc1472eee12c42aaf4fbca3.html#ga0873b54d0dc1472eee12c42aaf4fbca3">MEDfamilyCr</a>(fid, meshname,<a class="code" href="a00577_afd1f2684a3484575283e2a46f2d809da.html#afd1f2684a3484575283e2a46f2d809da">MED_NO_NAME</a>, 0, 0, <a class="code" href="a00577_a41b68e0bf49e21cf091f12ee6d9ab66c.html#a41b68e0bf49e21cf091f12ee6d9ab66c">MED_NO_GROUP</a>) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : familly 0 creation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close MED file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid)  &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : close file ...&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
</div><!-- fragment --><p>A la lecture des maillages déformables à topologie constante, une fois la lecture du maillage initiale effectuée, il faut itérer sur les différentes étapes d'évolution présentes dans le maillage (le nombre d'étape est lue par les routines <a class="el" href="a01055_gaf5e84a05155579ded1ba18a672385f97.html#gaf5e84a05155579ded1ba18a672385f97">MEDmeshInfoByName</a> / <a class="el" href="a00716_a5b94892a2077826f2e2712c4ec3ae369.html#a5b94892a2077826f2e2712c4ec3ae369">mmhmin</a> ou <a class="el" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a> / <a class="el" href="a00716_af119a6264944d32e884b6d148bf17bcf.html#af119a6264944d32e884b6d148bf17bcf">mmhmii</a>) et à chaque étape : récupérer les valeurs du pas de temps et du numéro d'itération avec la routine <a class="el" href="a01055_ga3faa1e7f284f59b74778ad5db9c00c95.html#ga3faa1e7f284f59b74778ad5db9c00c95">MEDmeshComputationStepInfo</a> / <a class="el" href="a00716_aaf283cac4dc51471665ee1b713f5c961.html#aaf283cac4dc51471665ee1b713f5c961">mmhcsi</a> ; déterminer la nature du changement parmi les cas possibles pré-cités avec la routine <a class="el" href="a01055_ga2b875dddcf5922d6143c72cb1e0924cf.html#ga2b875dddcf5922d6143c72cb1e0924cf">MEDmeshnEntityWithProfile</a> / <a class="el" href="a00716_ad8572227573582320220320a354fb2cd.html#ad8572227573582320220320a354fb2cd">mmhnep</a> et également récupérer le nombre de noeuds à lire selon le mode de stockage mémoire passé en paramètre ; lire les nouvelles coordonnées des noeuds avec la routine <a class="el" href="a01055_ga069faade0b33a1d245a20160e7f33ce5.html#ga069faade0b33a1d245a20160e7f33ce5">MEDmeshNodeCoordinateWithProfileRd</a> / <a class="el" href="a00716_a31b179e69893200d6625b4c81729e0bc.html#a31b179e69893200d6625b4c81729e0bc">mmhcor</a>.</p>
<p>C'est ce que fait le cas d'utilisation suivant.</p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *  Use case 7 : read a 2D unstructured mesh with nodes coordinates modifications</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> meshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;2D unstructured mesh&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> meshdescription[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshdim;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> spacedim;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sortingtype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> meshtype;</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> axistype;</div>
<div class="line">  <span class="keywordtype">char</span> axisname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> unitname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *coordinates = NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnodes = 0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *triaconnectivity = NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ntria3 = 0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *quadconnectivity = NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nquad4 = 0;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> coordinatechangement;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> geotransformation;</div>
<div class="line">  <span class="keywordtype">int</span> i, it;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profilesize;</div>
<div class="line">  <span class="keywordtype">char</span> profilename[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> numdt, numit;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> dt;</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* open MED file with READ ONLY access mode */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDmesh_6.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : open file in READ ONLY ACCESS mode ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * ... we know that the MED file has only one mesh,</span></div>
<div class="line"><span class="comment">   * a real code would check ...</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read mesh informations : mesh dimension, space dimension ... */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gaf5e84a05155579ded1ba18a672385f97.html#gaf5e84a05155579ded1ba18a672385f97">MEDmeshInfoByName</a>(fid, meshname, &amp;spacedim, &amp;meshdim, &amp;meshtype, meshdescription,</div>
<div class="line">                        dtunit, &amp;sortingtype, &amp;nstep, &amp;axistype, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : mesh info ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read how many nodes in the mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((nnodes = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,  <a class="code" href="a00577_a865361460bec98f2ec3f5bb3237b9264.html#a865361460bec98f2ec3f5bb3237b9264">MED_NO_GEOTYPE</a>,</div>
<div class="line">                               <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,&amp;coordinatechangement,</div>
<div class="line">                               &amp;geotransformation)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * ... we know that we only have MED_TRIA3 and MED_QUAD4 in the mesh,</span></div>
<div class="line"><span class="comment">   * a real code would check all MED geometry cell types ...</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read how many triangular cells in the mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((ntria3 = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,<a class="code" href="a00577_a4a1eb7ba296742a6f5eb8b5b23b39670.html#a4a1eb7ba296742a6f5eb8b5b23b39670">MED_TRIA3</a>,</div>
<div class="line">                               MED_CONNECTIVITY, MED_NODAL,&amp;coordinatechangement,</div>
<div class="line">                               &amp;geotransformation)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of MED_TRIA3 ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read how many quadrangular cells in the mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((nquad4 = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,<a class="code" href="a00577_a24ea9c52f5bde41d9a072925249ec06c.html#a24ea9c52f5bde41d9a072925249ec06c">MED_QUAD4</a>,</div>
<div class="line">                               MED_CONNECTIVITY, MED_NODAL, &amp;coordinatechangement,</div>
<div class="line">                               &amp;geotransformation)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of MED_QUAD4 ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read mesh nodes coordinates in the initial mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((coordinates = (<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>)*nnodes*spacedim)) == NULL) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga392a4bd4e6d340020755de7353f8a528.html#ga392a4bd4e6d340020755de7353f8a528">MEDmeshNodeCoordinateRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_FULL_INTERLACE,</div>
<div class="line">                              coordinates) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">    free(coordinates);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read cells connectivity in the initial mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((triaconnectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*ntria3*3)) == NULL) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga014f716ad13c72466b4aa94237876bf5.html#ga014f716ad13c72466b4aa94237876bf5">MEDmeshElementConnectivityRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,</div>
<div class="line">                                   <a class="code" href="a00577_a4a1eb7ba296742a6f5eb8b5b23b39670.html#a4a1eb7ba296742a6f5eb8b5b23b39670">MED_TRIA3</a>, MED_NODAL, MED_FULL_INTERLACE, triaconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : MED_TRIA3 connectivity ...&quot;</span>);</div>
<div class="line">    free(triaconnectivity);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  free(triaconnectivity);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ((quadconnectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nquad4*4)) == NULL) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga014f716ad13c72466b4aa94237876bf5.html#ga014f716ad13c72466b4aa94237876bf5">MEDmeshElementConnectivityRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,</div>
<div class="line">                                   <a class="code" href="a00577_a24ea9c52f5bde41d9a072925249ec06c.html#a24ea9c52f5bde41d9a072925249ec06c">MED_QUAD4</a>, MED_NODAL, MED_FULL_INTERLACE, quadconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : MED_QUAD4 connectivity ...&quot;</span>);</div>
<div class="line">    free(quadconnectivity);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  free(quadconnectivity);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * ... we know that the family number of nodes and elements is 0, a real code would check ...</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read nodes coordinates changements step by step */</span></div>
<div class="line">  <span class="keywordflow">for</span> (it=1;it&lt;nstep;it++) {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01055_ga3faa1e7f284f59b74778ad5db9c00c95.html#ga3faa1e7f284f59b74778ad5db9c00c95">MEDmeshComputationStepInfo</a>(fid, meshname, it+1,</div>
<div class="line">                                   &amp;numdt, &amp;numit, &amp;dt) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : Computing step info ...&quot;</span>);</div>
<div class="line">      <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(meshname);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* test changement : for nodes coordinates */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((nnodes = <a class="code" href="a01055_ga2b875dddcf5922d6143c72cb1e0924cf.html#ga2b875dddcf5922d6143c72cb1e0924cf">MEDmeshnEntityWithProfile</a>(fid, meshname, numdt, numit,</div>
<div class="line">                                            <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,  <a class="code" href="a00577_a865361460bec98f2ec3f5bb3237b9264.html#a865361460bec98f2ec3f5bb3237b9264">MED_NO_GEOTYPE</a>,</div>
<div class="line">                                            <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,</div>
<div class="line">                                            <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a>, profilename, &amp;profilesize,</div>
<div class="line">                                            &amp;coordinatechangement, &amp;geotransformation)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* if coordinates have changed, then read the new coordinates */</span></div>
<div class="line">    <span class="keywordflow">if</span> (coordinatechangement) {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a01055_ga069faade0b33a1d245a20160e7f33ce5.html#ga069faade0b33a1d245a20160e7f33ce5">MEDmeshNodeCoordinateWithProfileRd</a>(fid, meshname, numdt, numit,</div>
<div class="line">                                             <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a>,profilename,</div>
<div class="line">                                             MED_FULL_INTERLACE,<a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                             coordinates) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">        free(coordinates);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  free(coordinates);</div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close MED file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : close file&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><p>Le cas d'utilisation suivant propose une approche plus générique dans la lecture des maillages déformables à topologie constante.</p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *  Use case 8 : read a 2D unstructured mesh with coordinates nodes</span></div>
<div class="line"><span class="comment"> *  modifications (generic approach)</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nmesh;</div>
<div class="line">  <span class="keywordtype">char</span> meshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> meshdescription[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshdim;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> spacedim;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sortingtype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> meshtype;</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> axistype;</div>
<div class="line">  <span class="keywordtype">char</span> *axisname;</div>
<div class="line">  <span class="keywordtype">char</span> *unitname;</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *coordinates = NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ngeo = 0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnodes = 0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *connectivity = NULL;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> coordinatechangement;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> geotransformation;</div>
<div class="line">  <span class="keywordtype">int</span> i, it, j;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profilesize;</div>
<div class="line">  <span class="keywordtype">char</span> profilename[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> numdt, numit;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> dt;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> geotype;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> *geotypes = <a class="code" href="a00690_a54c2e34174a890046d0a204fa1a918a8.html#a54c2e34174a890046d0a204fa1a918a8">MED_GET_CELL_GEOMETRY_TYPE</a>;</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* open MED file with READ ONLY access mode */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDmesh_6.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : open file in READ ONLY ACCESS mode ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read how many mesh in the file */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((nmesh = <a class="code" href="a01055_ga28ebd8a34278e9f6c526bc0ebad83399.html#ga28ebd8a34278e9f6c526bc0ebad83399">MEDnMesh</a>(fid)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read how many mesh ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (i=0;i&lt;nmesh;i++) {</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read computation space dimension */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((spacedim = <a class="code" href="a01055_gad36ab4651405ed8542fb2a63e2fc44da.html#gad36ab4651405ed8542fb2a63e2fc44da">MEDmeshnAxis</a>(fid, i+1)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read computation space dimension ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* memory allocation */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((axisname  = (<span class="keywordtype">char</span>*) malloc(<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>*spacedim+1)) == NULL) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ((unitname  = (<span class="keywordtype">char</span>*) malloc(<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>*spacedim+1)) == NULL) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read mesh informations : meshname, mesh dimension, mesh type ... */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a>(fid, i+1, meshname, &amp;spacedim, &amp;meshdim, &amp;meshtype, meshdescription,</div>
<div class="line">                    dtunit, &amp;sortingtype, &amp;nstep,</div>
<div class="line">                    &amp;axistype, axisname, unitname) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : mesh info ...&quot;</span>)</div>
<div class="line">        free(axisname);</div>
<div class="line">      free(unitname);</div>
<div class="line">      goto ERROR;</div>
<div class="line">    }</div>
<div class="line">    free(axisname);</div>
<div class="line">    free(unitname);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read how many nodes in the mesh */</span></div>
<div class="line">    if ((nnodes = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>, <a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,</div>
<div class="line">                                 <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,&amp;coordinatechangement,</div>
<div class="line">                                 &amp;geotransformation)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read mesh nodes coordinates */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((coordinates = (<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>)*nnodes*spacedim)) == NULL) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01055_ga392a4bd4e6d340020755de7353f8a528.html#ga392a4bd4e6d340020755de7353f8a528">MEDmeshNodeCoordinateRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_FULL_INTERLACE,</div>
<div class="line">                                coordinates) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">      free(coordinates);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read all MED geometry cell types */</span></div>
<div class="line">    <span class="keywordflow">for</span> (it=1; it&lt;=<a class="code" href="a00577_abd42d91233c317ca8eb9b592e4502053.html#abd42d91233c317ca8eb9b592e4502053">MED_N_CELL_FIXED_GEO</a>; it++) {</div>
<div class="line"></div>
<div class="line">      geotype = geotypes[it];</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> ((ngeo = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,geotype,</div>
<div class="line">                                 MED_CONNECTIVITY, MED_NODAL, &amp;coordinatechangement,</div>
<div class="line">                                 &amp;geotransformation)) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of cell ...&quot;</span>);</div>
<div class="line">        <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(geotype);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (ngeo) {</div>
<div class="line">        <span class="comment">/* read cells connectivity in the mesh */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((connectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*ngeo*(geotype%100))) == NULL) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a01055_ga014f716ad13c72466b4aa94237876bf5.html#ga014f716ad13c72466b4aa94237876bf5">MEDmeshElementConnectivityRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,</div>
<div class="line">                                         geotype, MED_NODAL, MED_FULL_INTERLACE, connectivity) &lt; 0) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : cell connectivity ...&quot;</span>);</div>
<div class="line">          <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(geotype);</div>
<div class="line">          free(connectivity);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* memory deallocation */</span></div>
<div class="line">        free(connectivity);</div>
<div class="line">        connectivity = NULL;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read nodes coordinates changements step by step */</span></div>
<div class="line">    <span class="keywordflow">for</span> (it=1;it&lt;nstep;it++) {</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a01055_ga3faa1e7f284f59b74778ad5db9c00c95.html#ga3faa1e7f284f59b74778ad5db9c00c95">MEDmeshComputationStepInfo</a>(fid, meshname, it+1,</div>
<div class="line">                                     &amp;numdt, &amp;numit, &amp;dt) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : Computing step info ...&quot;</span>);</div>
<div class="line">        <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(meshname);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* test changement : for nodes coordinates */</span></div>
<div class="line">      <span class="keywordflow">if</span> ((nnodes = <a class="code" href="a01055_ga2b875dddcf5922d6143c72cb1e0924cf.html#ga2b875dddcf5922d6143c72cb1e0924cf">MEDmeshnEntityWithProfile</a>(fid, meshname, numdt, numit,</div>
<div class="line">                                              <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>, <a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,</div>
<div class="line">                                              <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,</div>
<div class="line">                                              <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a>, profilename, &amp;profilesize,</div>
<div class="line">                                              &amp;coordinatechangement, &amp;geotransformation)) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* if only coordinates have changed, then read the new coordinates */</span></div>
<div class="line">      <span class="comment">/* to verify if there is a matrix transformation =&gt; UsesCase_MEDmesh12. */</span></div>
<div class="line">      <span class="keywordflow">if</span> (coordinatechangement &amp;&amp; geotransformation) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a01055_ga069faade0b33a1d245a20160e7f33ce5.html#ga069faade0b33a1d245a20160e7f33ce5">MEDmeshNodeCoordinateWithProfileRd</a>(fid, meshname, numdt, numit,</div>
<div class="line">                                               <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a>,profilename,</div>
<div class="line">                                               MED_FULL_INTERLACE,<a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                               coordinates) &lt; 0) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">          free(coordinates);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  free(coordinates);</div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close MED file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : close file&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><p>Pour ce qui concerne l'écriture des maillages avec déformation solide, il faut utiliser la routine <a class="el" href="a01055_ga1a9b0f9b78488988128a784526d84f81.html#ga1a9b0f9b78488988128a784526d84f81">MEDmeshNodeCoordinateTrsfWr</a> / <a class="el" href="a00716_a99eb0fcd8971255711df7f13034f9f16.html#a99eb0fcd8971255711df7f13034f9f16">mmhtfw</a> en passant en paramètre le pas de temps et ou le numéro d'ordre correspondant à l'étape et la matrice de transformation. Cette matrice comporte 7 valeurs réelles : les trois premières définissent la translation à appliquer selon l'ordre des axes définis pour le maillage et les quatres suivantes définissent une rotation phi par le quarternion (p4,p5-7) o&ugrave; p4 est le scalaire et p5-7 le vecteur décrit suivant l'ordre des axes définis pour le maillage. S'il y a moins de trois axes définis, les paramètres inutiles à la transformation doivent être à zéro.</p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *  How to create an unstructured mesh</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  Use case 9 : a 2D unstructured mesh with moving grid</span></div>
<div class="line"><span class="comment"> *  transformation</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> meshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;2D unstructured mesh&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> spacedim = 2;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshdim = 2;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> axisname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;x               y               &quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> unitname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;cm              cm              &quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> initial_coordinates[30] = { 2.,1.,  7.,1.,  12.,1.,  17.,1.,  22.,1.,</div>
<div class="line">                                              2.,6.,  7.,6.,  12.,6.,  17.,6.,  22.,6.,</div>
<div class="line">                                              2.,11., 7.,11., 12.,11., 17.,11., 22.,11.};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnodes = 15;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> triaconnectivity[24] = { 1,7,6,   2,7,1,  3,7,2,   8,7,3,</div>
<div class="line">                                   13,7,8, 12,7,13, 11,7,12, 6,7,11 };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ntria3 = 8;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> quadconnectivity[16] = {3,4,9,8,    4,5,10,9,</div>
<div class="line">                                        15,14,9,10, 13,8,9,14};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nquad4 = 4;</div>
<div class="line">  <span class="comment">/* matrix transformation (step 1) : rotation about the Y-axis : 45 degrees */</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> tansfMatrix_step1 [7] = { 0.0, 0.0, 0.0, 0.92388, 0.0, 0.38268, 0.0 };</div>
<div class="line">  <span class="comment">/* matrix transformation (step 2) : rotation about the Y-axis : 90 degrees */</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> tansfMatrix_step2 [7] = { 0.0, 0.0, 0.0, 0.707,   0.0, 0.707,   0.0 };</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* open MED file */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDmesh_9.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85aa23dd1c18b596924d5f50c8402b84c8e">MED_ACC_CREAT</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : file creation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* write a comment in the file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga08d625f5403fefb9deb7d47f9a915c41.html#ga08d625f5403fefb9deb7d47f9a915c41">MEDfileCommentWr</a>(fid,<span class="stringliteral">&quot;A 2D unstructured mesh : 15 nodes, 12 cells&quot;</span>) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write file description ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* mesh creation : a 2D unstructured mesh */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga6007c3f1a62732e7a46c5eca232be78a.html#ga6007c3f1a62732e7a46c5eca232be78a">MEDmeshCr</a>(fid, meshname, spacedim, meshdim, <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1a3719e53a4838d222f0a58148292fda41">MED_UNSTRUCTURED_MESH</a>,</div>
<div class="line">                <span class="stringliteral">&quot;A 2D structured mesh&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,MED_SORT_DTIT,MED_CARTESIAN, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : mesh creation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* nodes coordinates in a cartesian axis in full interlace mode</span></div>
<div class="line"><span class="comment">     (X1,Y1, X2,Y2, X3,Y3, ...) with no iteration and computation step</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga9dee3d76d357b2aa31e562406d151f70.html#ga9dee3d76d357b2aa31e562406d151f70">MEDmeshNodeCoordinateWithProfileWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                         <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, <a class="code" href="a00577_aaa89a5e5e6d32de69614b70cf74e29cc.html#aaa89a5e5e6d32de69614b70cf74e29cc">MED_NO_PROFILE</a>,</div>
<div class="line">                                         MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                         nnodes, initial_coordinates) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* cells connectiviy is defined in nodal mode */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gade9c04c83f2909bfa25094f94ec0f6d2.html#gade9c04c83f2909bfa25094f94ec0f6d2">MEDmeshElementConnectivityWithProfileWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                              MED_CELL, <a class="code" href="a00577_a4a1eb7ba296742a6f5eb8b5b23b39670.html#a4a1eb7ba296742a6f5eb8b5b23b39670">MED_TRIA3</a>, MED_NODAL,</div>
<div class="line">                                              <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, <a class="code" href="a00577_aaa89a5e5e6d32de69614b70cf74e29cc.html#aaa89a5e5e6d32de69614b70cf74e29cc">MED_NO_PROFILE</a>,</div>
<div class="line">                                              MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                              ntria3, triaconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : triangular cells connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gade9c04c83f2909bfa25094f94ec0f6d2.html#gade9c04c83f2909bfa25094f94ec0f6d2">MEDmeshElementConnectivityWithProfileWr</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                              MED_CELL, <a class="code" href="a00577_a24ea9c52f5bde41d9a072925249ec06c.html#a24ea9c52f5bde41d9a072925249ec06c">MED_QUAD4</a>, MED_NODAL,</div>
<div class="line">                                              <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8dae0059ae013bcbd618f9d688a4f15354c">MED_COMPACT_STMODE</a>, <a class="code" href="a00577_aaa89a5e5e6d32de69614b70cf74e29cc.html#aaa89a5e5e6d32de69614b70cf74e29cc">MED_NO_PROFILE</a>,</div>
<div class="line">                                              MED_FULL_INTERLACE, <a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                              nquad4, quadconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : quadrangular cells connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">   * Mesh deformation (nodes coordinates) in 2 steps</span></div>
<div class="line"><span class="comment">   * A rotation by step for each node</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  <span class="comment">/* STEP 1 : dt1 = 5.5, it = 1*/</span></div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="a01055_ga1a9b0f9b78488988128a784526d84f81.html#ga1a9b0f9b78488988128a784526d84f81">MEDmeshNodeCoordinateTrsfWr</a>(fid, meshname, 1, 1, 5.5, tansfMatrix_step1) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;ecriture de la transformation géométrique n°1&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* STEP 2 : dt2 = 8.9, it = 1*/</span></div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="a01055_ga1a9b0f9b78488988128a784526d84f81.html#ga1a9b0f9b78488988128a784526d84f81">MEDmeshNodeCoordinateTrsfWr</a>(fid, meshname, 2, 2, 8.9, tansfMatrix_step2 ) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;ecriture de la transformation géométrique n°2&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* create family 0 : by default, all mesh entities family number is 0 */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01047_ga0873b54d0dc1472eee12c42aaf4fbca3.html#ga0873b54d0dc1472eee12c42aaf4fbca3">MEDfamilyCr</a>(fid, meshname,<a class="code" href="a00577_afd1f2684a3484575283e2a46f2d809da.html#afd1f2684a3484575283e2a46f2d809da">MED_NO_NAME</a>, 0, 0, <a class="code" href="a00577_a41b68e0bf49e21cf091f12ee6d9ab66c.html#a41b68e0bf49e21cf091f12ee6d9ab66c">MED_NO_GROUP</a>) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : create family ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close MED file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid)  &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : close file ...&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
</div><!-- fragment --><p>A la lecture des maillages avec déformation solide, une fois la lecture du maillage initiale effectuée, il faut itérer sur les différentes étapes d'évolution présentes dans le maillage (le nombre d'étape est lue par les routines <a class="el" href="a01055_gaf5e84a05155579ded1ba18a672385f97.html#gaf5e84a05155579ded1ba18a672385f97">MEDmeshInfoByName</a> / <a class="el" href="a00716_a5b94892a2077826f2e2712c4ec3ae369.html#a5b94892a2077826f2e2712c4ec3ae369">mmhmin</a> ou <a class="el" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a> / <a class="el" href="a00716_af119a6264944d32e884b6d148bf17bcf.html#af119a6264944d32e884b6d148bf17bcf">mmhmii</a>) et à chaque étape : récupérer les valeurs du pas de temps et du numéro d'itération avec la routine <a class="el" href="a01055_ga3faa1e7f284f59b74778ad5db9c00c95.html#ga3faa1e7f284f59b74778ad5db9c00c95">MEDmeshComputationStepInfo</a> / <a class="el" href="a00716_aaf283cac4dc51471665ee1b713f5c961.html#aaf283cac4dc51471665ee1b713f5c961">mmhcsi</a> ; déterminer la nature du changement parmi les cas possibles pré-cités avec la routine <a class="el" href="a01055_ga2b875dddcf5922d6143c72cb1e0924cf.html#ga2b875dddcf5922d6143c72cb1e0924cf">MEDmeshnEntityWithProfile</a> / <a class="el" href="a00716_ad8572227573582320220320a354fb2cd.html#ad8572227573582320220320a354fb2cd">mmhnep</a> et également vérifier la présence de la matrice de transformation ; lire la matrice de transformation avec la routine <a class="el" href="a01055_ga7c511c6150325e5274781e1234ce043e.html#ga7c511c6150325e5274781e1234ce043e">MEDmeshNodeCoordinateTrsfRd</a> / <a class="el" href="a00716_addbf3fa07ecc131e3a9071aa6d7308f8.html#addbf3fa07ecc131e3a9071aa6d7308f8">mmhtfr</a>.</p>
<p>Le cas d'utilisation suivant permet de lire de manière générique un maillage évolutif, à la fois s'il s'agit d'un maillage déformable à topologie constante ou d'un maillage avec déformation solide.</p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *  Use case 12 : read a 2D unstructured mesh with moving grid (generic approach)</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nmesh;</div>
<div class="line">  <span class="keywordtype">char</span> meshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> meshdescription[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshdim;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> spacedim;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sortingtype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> meshtype;</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> axistype;</div>
<div class="line">  <span class="keywordtype">char</span> *axisname;</div>
<div class="line">  <span class="keywordtype">char</span> *unitname;</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *coordinates = NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ngeo = 0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnodes = 0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *connectivity = NULL;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> coordinatechangement;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> geotransformation;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> matrixtransformation;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> matrixsize;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> matrix[7]={ 0, 0, 0, 0, 0, 0, 0};</div>
<div class="line">  <span class="keywordtype">int</span> i, it, j;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profilesize;</div>
<div class="line">  <span class="keywordtype">char</span> profilename[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> numdt, numit;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> dt;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> geotype;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> *geotypes = <a class="code" href="a00690_a54c2e34174a890046d0a204fa1a918a8.html#a54c2e34174a890046d0a204fa1a918a8">MED_GET_CELL_GEOMETRY_TYPE</a>;</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* open MED file with READ ONLY access mode */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDmesh_9.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : open file in READ ONLY ACCESS mode ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read how many mesh in the file */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((nmesh = <a class="code" href="a01055_ga28ebd8a34278e9f6c526bc0ebad83399.html#ga28ebd8a34278e9f6c526bc0ebad83399">MEDnMesh</a>(fid)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read how many mesh ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (i=0;i&lt;nmesh;i++) {</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read computation space dimension */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((spacedim = <a class="code" href="a01055_gad36ab4651405ed8542fb2a63e2fc44da.html#gad36ab4651405ed8542fb2a63e2fc44da">MEDmeshnAxis</a>(fid, i+1)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read computation space dimension ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* memory allocation */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((axisname  = (<span class="keywordtype">char</span>*) malloc(<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>*spacedim+1)) == NULL) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ((unitname  = (<span class="keywordtype">char</span>*) malloc(<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>*spacedim+1)) == NULL) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read mesh informations : meshname, mesh dimension, mesh type ... */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a>(fid, i+1, meshname, &amp;spacedim, &amp;meshdim, &amp;meshtype, meshdescription,</div>
<div class="line">                    dtunit, &amp;sortingtype, &amp;nstep,</div>
<div class="line">                    &amp;axistype, axisname, unitname) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : mesh info ...&quot;</span>);</div>
<div class="line">      free(axisname);</div>
<div class="line">      free(unitname);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line">    free(axisname);</div>
<div class="line">    free(unitname);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read how many nodes in the mesh */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((nnodes = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>, <a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,</div>
<div class="line">                                 <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,&amp;coordinatechangement,</div>
<div class="line">                                 &amp;geotransformation)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read mesh nodes coordinates */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((coordinates = (<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>)*nnodes*spacedim)) == NULL) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01055_ga392a4bd4e6d340020755de7353f8a528.html#ga392a4bd4e6d340020755de7353f8a528">MEDmeshNodeCoordinateRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_FULL_INTERLACE,</div>
<div class="line">                                coordinates) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">      free(coordinates);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read all MED geometry cell types */</span></div>
<div class="line">    <span class="keywordflow">for</span> (it=1; it&lt;= <a class="code" href="a00577_abd42d91233c317ca8eb9b592e4502053.html#abd42d91233c317ca8eb9b592e4502053">MED_N_CELL_FIXED_GEO</a>; it++) {</div>
<div class="line"></div>
<div class="line">      geotype = geotypes[it];</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> ((ngeo = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,geotype,</div>
<div class="line">                                 MED_CONNECTIVITY, MED_NODAL, &amp;coordinatechangement,</div>
<div class="line">                                 &amp;geotransformation)) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of cell ...&quot;</span>);</div>
<div class="line">        <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(geotype);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (ngeo) {</div>
<div class="line">        <span class="comment">/* read cells connectivity in the mesh */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((connectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*ngeo*(geotype%100))) == NULL) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : memory allocation ...&quot;</span>);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a01055_ga014f716ad13c72466b4aa94237876bf5.html#ga014f716ad13c72466b4aa94237876bf5">MEDmeshElementConnectivityRd</a>(fid, meshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,</div>
<div class="line">                                         geotype, MED_NODAL, MED_FULL_INTERLACE, connectivity) &lt; 0) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : cell connectivity ...&quot;</span>);</div>
<div class="line">          <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(geotype);</div>
<div class="line">          free(connectivity);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* memory deallocation */</span></div>
<div class="line">        free(connectivity);</div>
<div class="line">        connectivity = NULL;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read nodes coordinates changements step by step */</span></div>
<div class="line">    <span class="keywordflow">for</span> (it=1;it&lt;nstep;it++) {</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a01055_ga3faa1e7f284f59b74778ad5db9c00c95.html#ga3faa1e7f284f59b74778ad5db9c00c95">MEDmeshComputationStepInfo</a>(fid, meshname, it+1,</div>
<div class="line">                                     &amp;numdt, &amp;numit, &amp;dt) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : Computing step info ...&quot;</span>);</div>
<div class="line">        <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(meshname);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* test changement : for nodes coordinates */</span></div>
<div class="line">      <span class="keywordflow">if</span> ((nnodes = <a class="code" href="a01055_ga2b875dddcf5922d6143c72cb1e0924cf.html#ga2b875dddcf5922d6143c72cb1e0924cf">MEDmeshnEntityWithProfile</a>(fid, meshname, numdt, numit,</div>
<div class="line">                                              <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>, <a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,</div>
<div class="line">                                              <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,</div>
<div class="line">                                              <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a>, profilename, &amp;profilesize,</div>
<div class="line">                                              &amp;coordinatechangement, &amp;geotransformation)) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* if only coordinates have changed, then read the new coordinates */</span></div>
<div class="line">      <span class="keywordflow">if</span> (coordinatechangement &amp;&amp; geotransformation) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a01055_ga069faade0b33a1d245a20160e7f33ce5.html#ga069faade0b33a1d245a20160e7f33ce5">MEDmeshNodeCoordinateWithProfileRd</a>(fid, meshname, numdt, numit,</div>
<div class="line">                                               <a class="code" href="a00577_a3f7b3a3c5ddcaba3fa1741a367503c8d.html#a3f7b3a3c5ddcaba3fa1741a367503c8da75948cc18980c808e34f1c8177207197">MED_GLOBAL_STMODE</a>,profilename,</div>
<div class="line">                                               MED_FULL_INTERLACE,<a class="code" href="a00577_a65a18ab6db672a2d21312d1813a3bb19.html#a65a18ab6db672a2d21312d1813a3bb19">MED_ALL_CONSTITUENT</a>,</div>
<div class="line">                                               coordinates) &lt; 0) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : nodes coordinates ...&quot;</span>);</div>
<div class="line">          free(coordinates);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (coordinatechangement &amp;&amp; ! geotransformation) {</div>
<div class="line"></div>
<div class="line">        matrixsize = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,meshname,numdt,numit,</div>
<div class="line">                                    <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,<a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61ba883b42694f7b0c829a27c20ad7483588">MED_COORDINATE_TRSF</a>,MED_NODAL,&amp;coordinatechangement,</div>
<div class="line">                                    &amp;matrixtransformation);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (matrixsize &lt; 0) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : matrix transformation ...&quot;</span>);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (matrixtransformation) {</div>
<div class="line">          <span class="keywordflow">if</span> ( <a class="code" href="a01055_ga7c511c6150325e5274781e1234ce043e.html#ga7c511c6150325e5274781e1234ce043e">MEDmeshNodeCoordinateTrsfRd</a>(fid, meshname, numdt, numit, matrix) &lt; 0 ) {</div>
<div class="line">            <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read transformation matrix ...&quot;</span>);</div>
<div class="line">            <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  free(coordinates);</div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close MED file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : close file&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><p><br />
<br />
</p>
<h1><a class="anchor" id="4."></a>Créer et lire une équivalence entre les entités d'un maillage</h1>
<p>La notion d'équivalence permet de gérer des listes de correspondances mettant en relation deux à deux des entités de même type (deux noeuds, deux mailles, deux arêtes ou deux faces). Voici quelques exemples : </p><ul>
<li>
Dans le cadre d'une symétrie de révolution, un bord de domaine est associé à un autre bord. Ces bords n'étant pas des volumes, les mailles en correspondances sont dans ce cas des mailles 2D. </li>
<li>
Dans le cadre de voisinages non conformes, on veut mémoriser une liste de mailles 3D liées. La notion d'équivalence est parfaite et concise. </li>
</ul>
<h2>Création d'une équivalence entre entités d'un même maillage</h2>
<p>Une équivalence est identifiée par son nom (cha&icirc;ne de <a class="el" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a> caractères) et possède une description (cha&icirc;ne d'au plus <a class="el" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>). La création d'équivalences est optionnelle. Un fichier peut contenir zéro ou plusieurs équivalences pour chaque maillage local au fichier. La routine <a class="el" href="a01046_ga29dda89b8ee21c695d3bc823b56498d6.html#ga29dda89b8ee21c695d3bc823b56498d6">MEDequivalenceCr</a> / <a class="el" href="a00601_a714cd2d9b5e681645022e227a0eee1aa.html#a714cd2d9b5e681645022e227a0eee1aa">meqcre</a> permet la création d'équivalences d'entités d'un maillage. </p>
 <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01046_ga29dda89b8ee21c695d3bc823b56498d6.html#ga29dda89b8ee21c695d3bc823b56498d6">MEDequivalenceCr</a>(fid,maa,equ,des) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a00386.html">Fichier d'exemple associé</a></small> </p>
<h2>Ecriture des correspondances d'une équivalence entre entités de même type</h2>
<p>Une fois l'équivalence créée, il ne reste plus qu'à y associer les correspondances d'entitées par l'intermédiaire d'un tableau de correspondances. Si l'on décrit des correspondances sur des types d'entités différents ou sur différentes étapes d'évolution du maillage, plusieurs tableaux de correspondances peuvent apparaîtres dans une équivalence. Les numéros d'entités en correspondances apparaissent sous forme d'une suite de pairs dans un tableau de correspondances. </p>
<p>Voici un exemple : </p><table class="doxtable">
<caption id="correspondence" align="bottom">correspondence</caption>
<tr>
<th colspan="2">C1</th><th colspan="2">C2</th><th colspan="2">C3 </th></tr>
<tr>
<td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6 </td></tr>
</table>
<p>Le tableau de correspondances appliqué à des entités de type MED_TRIA3 (triangle à 3 noeuds) décrit les 3 correspondances suivantes : </p><ul>
<li>
(triangle numéro 1 , triangle numéro 2), (triangle numéro 3 , triangle numéro 4), (triangle numéro 5 , triangle numéro 6). </li>
</ul>
<p>Les numéros d'entités utilisés sont ceux de la numérotation implicite des entités même si une numérotation optionnelle est présente (régle invariante dans MED). </p>
<p>La routine <a class="el" href="a01046_ga6b614eb87b395eee93eebb99d29ecb84.html#ga6b614eb87b395eee93eebb99d29ecb84">MEDequivalenceCorrespondenceWr</a> / <a class="el" href="a00601_a71cde7e41d1b7f5b26b2d38b6cacf40a.html#a71cde7e41d1b7f5b26b2d38b6cacf40a">meqcow</a> permet d'écrire un tableau de correspondances à une étape d'évolution du maillage ( ( <a class="el" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a> , <a class="el" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a> ); par défaut) et pour un type d'entité . Si le type d'entité est un élément, il faut préciser le type géométrique de l'élément. </p>
 <div class="fragment"><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01046_ga6b614eb87b395eee93eebb99d29ecb84.html#ga6b614eb87b395eee93eebb99d29ecb84">MEDequivalenceCorrespondenceWr</a>(fid,maa,equ,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                                     <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a227d14957ec5f221685cb1d6ec3b6c67">MED_CELL</a>,<a class="code" href="a00577_a4a1eb7ba296742a6f5eb8b5b23b39670.html#a4a1eb7ba296742a6f5eb8b5b23b39670">MED_TRIA3</a>,ncor,cor) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a00386.html">Fichier d'exemple associé</a></small> </p>
<h2>Lectures des équivalences</h2>
<p>La découverte des équivalences définies sur un maillage se fait par itération. Le nombre d'équivalences sur lesquelles itérer est renvoyé par la routine <a class="el" href="a01046_ga141a73149854a23b235db0009d54568a.html#ga141a73149854a23b235db0009d54568a">MEDnEquivalence</a> / <a class="el" href="a00601_a0d0e9aa2b68a9fa2eba636d811021fbc.html#a0d0e9aa2b68a9fa2eba636d811021fbc">meqneq</a>. </p>
 <div class="fragment"><div class="line">  <span class="keywordflow">if</span> ((nequ = <a class="code" href="a01046_ga141a73149854a23b235db0009d54568a.html#ga141a73149854a23b235db0009d54568a">MEDnEquivalence</a>(fid,maa)) &lt; 0)</div>
</div><!-- fragment --> <small><a class="el" href="a00354.html">Fichier d'exemple associé</a></small> </p>
<p>Chaque appel à <a class="el" href="a01046_ga095907f3c6186b90e3e0bd3337f5f4b3.html#ga095907f3c6186b90e3e0bd3337f5f4b3">MEDequivalenceInfo</a> / <a class="el" href="a00601_a8c9298d26896331de56706dddfbeedf3.html#a8c9298d26896331de56706dddfbeedf3">meqeqi</a> renvoie ensuite l'ensemble des informations relatives à une équivalence, à savoir : </p><ul>
<li>
Nom de l'équivalence </li>
<li>
Description de l'équivalence </li>
<li>
Nombre d'étapes d'évolution du maillage pour lesquelles au moins un tableau de correspondance existe </li>
<li>
Nombre de correspondances existantes pour l'étape par défaut ( <a class="el" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a> , <a class="el" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a> ) </li>
</ul>
 <div class="fragment"><div class="line">  <span class="keywordflow">for</span> (i = 0;i&lt;nequ;i++) {</div>
<div class="line">    ret = <a class="code" href="a01046_ga095907f3c6186b90e3e0bd3337f5f4b3.html#ga095907f3c6186b90e3e0bd3337f5f4b3">MEDequivalenceInfo</a>(fid,nommaa,i+1,equ,des,&amp;nstep,&amp;nocstpncor);</div>
</div><!-- fragment --> <small><a class="el" href="a00354.html">Fichier d'exemple associé</a></small> </p>
<p>Si le maillage concerné ne possède qu'une étape d'évolution (obligatoirement ( <a class="el" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a> , <a class="el" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a> ) ) ou s'il n'y a qu'une étape d'évolution de maillage pour laquelle l'équivalence est définie et que le nombre de correspondances pour l'étape par défaut ( <a class="el" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a> , <a class="el" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a> ) est non nul, il n'est pas necessaire d'inspecter les différentes étapes par des appels itératifs à <a class="el" href="a01046_ga8f0a42049df9f516b3f43848c33838bc.html#ga8f0a42049df9f516b3f43848c33838bc">MEDequivalenceComputingStepInfo</a> / <a class="el" href="a00601_a24c25697bae26305400669efae7e121c.html#a24c25697bae26305400669efae7e121c">meqcsi</a>. </p>
<h2>Lectures des équivalences pour différentes étapes d'évolution du maillage</h2>
<p>Si l'équivalence est définie sur plusieurs étapes d'évolution de maillage la fonction <a class="el" href="a01046_ga8f0a42049df9f516b3f43848c33838bc.html#ga8f0a42049df9f516b3f43848c33838bc">MEDequivalenceComputingStepInfo</a> / <a class="el" href="a00601_a24c25697bae26305400669efae7e121c.html#a24c25697bae26305400669efae7e121c">meqcsi</a> permet d'obtenir les informations suivantes pour chaque étape : </p><ul>
<li>
Numéro de pas de temps de l'étape de calcul (<a class="el" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a> si pas de numéro de pas de temps). </li>
<li>
Numéro d'itération de l'étape de calcul (<a class="el" href="a00577_a95919207fd7a18ba26e6e03f04811e3f.html#a95919207fd7a18ba26e6e03f04811e3f">MED_NO_IT</a> si pas de numéro d'itération). </li>
<li>
Nombre de tableaux de correspondances sur la séquence de calcul. </li>
</ul>
 <div class="fragment"><div class="line">    <span class="keywordflow">for</span> (_cstpit=1; _cstpit &lt;= nstep; ++_cstpit) {</div>
<div class="line">      ret = <a class="code" href="a01046_ga8f0a42049df9f516b3f43848c33838bc.html#ga8f0a42049df9f516b3f43848c33838bc">MEDequivalenceComputingStepInfo</a>   (fid, nommaa, equ, _cstpit,</div>
<div class="line">                                               &amp; _numdt, &amp;_numit,&amp;nocstpncor);</div>
</div><!-- fragment --> <small><a class="el" href="a00354.html">Fichier d'exemple associé</a></small> </p>
<h2>Lectures des correspondances d'une équivalence entre entités &ndash;de même type&ndash; à une étape d'évolution du maillage</h2>
<p>La fonction <a class="el" href="a01046_ga3a2ff4642c52826b41f78a337584271a.html#ga3a2ff4642c52826b41f78a337584271a">MEDequivalenceCorrespondenceSize</a> / <a class="el" href="a00601_ab361acdc44d8ab629d6c0a73972698c0.html#ab361acdc44d8ab629d6c0a73972698c0">meqcsz</a> lit le nombre de correspondances d'une étape d'évolution du maillage et permet de dimensionner le tableau de correspondances. Cette fonction peut être appelée pour chaque couple ( type d'entité , type géométrique) présent dans le maillage si l'on n'a pas d'information concernant la présence d'équivalence sur des entités particulières. </p>
 <div class="fragment"><div class="line">      ret = <a class="code" href="a01046_ga3a2ff4642c52826b41f78a337584271a.html#ga3a2ff4642c52826b41f78a337584271a">MEDequivalenceCorrespondenceSize</a>(fid,nommaa,equ,_numdt,_numit,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,<a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,&amp;ncor);</div>
<div class="line">      <span class="keywordflow">if</span> (ncor &gt; 0) {</div>
<div class="line">        cor = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*ncor*2);</div>
</div><!-- fragment --> <small><a class="el" href="a00354.html">Fichier d'exemple associé</a></small> </p>
<p>Une fois le tableau de correspondances dimensionné, la fonction <a class="el" href="a01046_ga4c612876ec9ff0c398a291be79df540b.html#ga4c612876ec9ff0c398a291be79df540b">MEDequivalenceCorrespondenceRd</a> / <a class="el" href="a00601_a8168ef8d17b74cf728642f9036c555c5.html#a8168ef8d17b74cf728642f9036c555c5">meqcor</a> permet de lire le tableau de correspondance pour un type d'entité et une étape d'évolution du maillage fixés. </p>
 <div class="fragment"><div class="line">        ret= <a class="code" href="a01046_ga4c612876ec9ff0c398a291be79df540b.html#ga4c612876ec9ff0c398a291be79df540b">MEDequivalenceCorrespondenceRd</a>(fid,nommaa,equ,_numdt,_numit,</div>
<div class="line">                                            <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,<a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>,cor);</div>
</div><!-- fragment --> <small><a class="el" href="a00354.html">Fichier d'exemple associé</a></small> </p>
<h2>Liens vers les fichiers exemples utilisés</h2>
<ul>
<li>
<p class="startli"></p>
<p><a class="el" href="a00386.html">Fichier d'exemple test12.c</a> </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p><a class="el" href="a00382.html">Fichier d'exemple test13.c</a> </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p><a class="el" href="a00354.html">Fichier d'exemple test13b.c</a> </p>
<p class="endli"></p>
</li>
</ul>
<p><br />
<br />
</p>
<h1><a class="anchor" id="5."></a>Créer et lire un maillage avec des éléments de structure</h1>
<p>MED permet de créer des modèles d'éléments de structure. Un modèle d'élément est propre à un fichier qui doit être celui de(s) maillage(s) de calcul qui utilisent le modèle. Il peut y avoir plusieurs modèles d'éléments de structures dans un même fichier. Une fois le modèle défini, l'élément de structure devient un nouveau type d'élément d'un maillage de calcul au même titre que les autres types d'éléments pré-définis dans le modèle. </p>
<p>Le modèle MED réserve des noms de modèles pour les particules (<a class="el" href="a00577_a786e7850e4d89a31047496e6fd48476d.html#a786e7850e4d89a31047496e6fd48476d">MED_PARTICLE_NAME</a>), les billes (<a class="el" href="a00577_aa86785fc7c9bc73e184da6e687f79f2b.html#aa86785fc7c9bc73e184da6e687f79f2b">MED_BALL_NAME</a>) et les poutres (<a class="el" href="a00577_a738baa2a243efa4f2e957c2a75b616c1.html#a738baa2a243efa4f2e957c2a75b616c1">MED_BEAM_NAME</a>). Cette liste de noms réservés est amenée à s'étoffer au fil des versions de MED, de fait tous les noms de modèle commen&ccedil;ant par &laquo;&#160;MED_&#160;&raquo; sont également réservés. A chaque nom de modèle réservé ou fixé par l'utilisateur est associé un numéro de type géométrique unique au fichier. Ce numéro complète les numéros existants pour les types géométriques éléments finis. Le numéro de type d'un élément de structure est utilisable comme celui des types géométriques classiques pour s'informer de la présence du type d'élément dans un maillage de calcul. Le type d'entité de ce type d'élément est <a class="el" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>. </p>
<p>Un modèle de structure utilisé dans un fichier doit être complètement défini dans ce fichier. Ainsi les maillages et les champs s'appuyant sur des élements de ce modèle pourront être relus par tout code s'intéressant aux éléments de structure. La description d'un modèle d'élément de structure peut s'appuyer sur un maillage support. </p>
<p>Si le modèle ne contient pas de maillage support, chaque élément de structure associé au modèle, s'appuie sur les noeuds du maillage de calcul pour se positionner. C'est le cas par exemple du modèle pré-défini des particules. Les coordonnées de ces noeuds peuvent évoluer au cours du temps selon le principe des maillages évolutifs présentés précédemment. </p>
<p>Un maillage support contient 1 ou plusieurs noeuds et éventuellement des mailles. La connectivité des éléments de structure y est uniquement décrite en mode nodal. Les noeuds d'un maillage support sont définis indépendamment des maillages de calcul. Ces noeuds ne sont pas référencés dans les maillages de calculs. Les coordonnées des noeuds sont définies dans un espace de dimension égale à celle de l'élément de structure. Le repère de coordonnées est propre à la description du modèle de l'élément. Les mailles définies dans un maillage support sont indépendantes des maillages de calcul et ne sont pas référencées dans les maillages de calcul. S'il y a des mailles dans le maillage support, la connectivité des éléments de structure référence des numéros de mailles dans les maillages de calcul. Il ne peut y avoir qu'un seul type géométrique de maille dans un maillage support. Dans un maillage support, il est pas utile d'écrire les numéros de familles (toutes les entités sont rattachées à la famille 0 par défaut), les numéros optionnels, les noms optionnels des entités du maillage. Un maillage support ne peut contenir de polygones ou polyèdres quelconques. </p>
<p>Les caractéristiques d'un élément de structure sont décrites par des attributs. Il existe deux types d'attributs caractéristiques : des attributs caractéristiques à valeur constante pour tous les éléments du modèle (ou attributs caractéristiques du modèle), des attributs caractéristiques à valeur variable selon les éléments du modèle (la valeur est alors définie au niveau des éléments dans les maillage de calcul). Les attributs caractéristiques sont typé par les types MED standards (entier, réel, cha&icirc;ne de caractères de taille <a class="el" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>). Un attribut peut comporter plusieurs composantes au même titre qu'un champ. </p>
<p>La création d'un modèle d'élément de structure se fait avec la routine <a class="el" href="a01058_ga018cf42798055d8cd2a8ec80f733d31d.html#ga018cf42798055d8cd2a8ec80f733d31d">MEDstructElementCr</a> / <a class="el" href="a00813_a80f3a277c487989f3dabcdf442005ba2.html#a80f3a277c487989f3dabcdf442005ba2">msecre</a>. Un modèle est identifié par son nom qui est une cha&icirc;ne de <a class="el" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a> caractères. La création d'un attribut caractéristique à valeur variable se fait avec la routine <a class="el" href="a01058_gab486f3f6ba5622b8e22562286921bdd1.html#gab486f3f6ba5622b8e22562286921bdd1">MEDstructElementVarAttCr</a> / <a class="el" href="a00813_a5f7862f73c77451fda10a80f4c18f35f.html#a5f7862f73c77451fda10a80f4c18f35f">msevac</a>. La création d'un attribut caractéristique du modèle se fait avec les routines <a class="el" href="a01058_ga4076c307f43a271a12071bb74b0690ef.html#ga4076c307f43a271a12071bb74b0690ef">MEDstructElementConstAttWr</a> / <a class="el" href="a00813_a60f2d448a1b86749c7049e0ed3cea3bd.html#a60f2d448a1b86749c7049e0ed3cea3bd">mseraw</a>, <a class="el" href="a00813_a37c2870b9d3ae0a4f240dc8f2d6547db.html#a37c2870b9d3ae0a4f240dc8f2d6547db">mseiaw</a>, <a class="el" href="a00813_a4e1629648a6de4834329c3bd5dc3d92c.html#a4e1629648a6de4834329c3bd5dc3d92c">msesaw</a>. La routine <a class="el" href="a01058_gabebaf350609299e314c5950be79b0855.html#gabebaf350609299e314c5950be79b0855">MEDmeshStructElementVarAttWr</a> / <a class="el" href="a00716_aacd1c28d8a12571d7b421e5ca9272259.html#aacd1c28d8a12571d7b421e5ca9272259">mmhraw</a>, <a class="el" href="a00716_a17b923437b8044aea3b9b5750d48575d.html#a17b923437b8044aea3b9b5750d48575d">mmhiaw</a>, <a class="el" href="a00716_a6f35f87f0174bcb86d6d8b746f4659d7.html#a6f35f87f0174bcb86d6d8b746f4659d7">mmhsaw</a> permet d'écrire les valeurs d'un attribut à valeur variable, l'appel à cette routine se faisant au moment de la création d'un maillage de calcul. Les routines <a class="el" href="a01058_ga4076c307f43a271a12071bb74b0690ef.html#ga4076c307f43a271a12071bb74b0690ef">MEDstructElementConstAttWr</a> / <a class="el" href="a00813_a60f2d448a1b86749c7049e0ed3cea3bd.html#a60f2d448a1b86749c7049e0ed3cea3bd">mseraw</a>, <a class="el" href="a00813_a37c2870b9d3ae0a4f240dc8f2d6547db.html#a37c2870b9d3ae0a4f240dc8f2d6547db">mseiaw</a>, <a class="el" href="a00813_a4e1629648a6de4834329c3bd5dc3d92c.html#a4e1629648a6de4834329c3bd5dc3d92c">msesaw</a> et <a class="el" href="a01058_ga10af186c4d6fa0cfd0aa3a6b2c90c0a4.html#ga10af186c4d6fa0cfd0aa3a6b2c90c0a4">MEDstructElementConstAttWithProfileWr</a> / <a class="el" href="a00813_afb90ddf463c56822261e1e0a3f49340e.html#afb90ddf463c56822261e1e0a3f49340e">mserpw</a>, <a class="el" href="a00813_a9bdd31f4d8ed07c9f0fc96f340d9234d.html#a9bdd31f4d8ed07c9f0fc96f340d9234d">mseipw</a>, <a class="el" href="a00813_a802fc8379d73d146d0771518f8da150a.html#a802fc8379d73d146d0771518f8da150a">msespw</a> permettent d'écrire les valeurs d'un attribut constant respectivement sans et avec un profil. </p>
<p>La création d'un maillage support se fait avec une routine spécifique <a class="el" href="a01060_ga8d14cb8ed06c18d7a8c7a32d89b5ebd5.html#ga8d14cb8ed06c18d7a8c7a32d89b5ebd5">MEDsupportMeshCr</a> / <a class="el" href="a00839_aa6323f29e87be5e3e2c4295f40564f07.html#aa6323f29e87be5e3e2c4295f40564f07">msmcre</a>. L'écriture des coordonnées des noeuds et de la connectivité des mailles se fait avec les mêmes routines que celles utilisées pour les maillages de calcul. Un maillage support est identifié par son nom qui est une cha&icirc;ne de <a class="el" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a> caractères.</p>
<p>Le cas d'utilisation suivant définit 3 modèles d'éléments de structure différents pour les particules, les billes et les poutres. Les deux derniers modèles s'appuient sur des maillages support également définis dans le fichier. Des éléments de structure qui correspondent à ces modèles sont finalement utilisés dans un maillage de calcul. </p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * StructElement use case 1 : write struct elements model in a file</span></div>
<div class="line"><span class="comment"> * STEP 1 : suppport mesh creation</span></div>
<div class="line"><span class="comment"> * STEP 2 : struct element model creation</span></div>
<div class="line"><span class="comment"> * STEP 3 : computation mesh creation</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <span class="keywordtype">char</span> elementname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> ballsupportname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;BALL_SUPPORT_MESH&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> beamsupportname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;BEAM_SUPPORT_MESH&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> computmeshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;COMPUT_MESH&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> beamsectionname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;BEAM_SECTION_MESH&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> elementdim = 3;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnode;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> geotype=<a class="code" href="a00577_a9a2843c7d6eacffdd9377b5bfb8a6de3.html#a9a2843c7d6eacffdd9377b5bfb8a6de3">MED_NONE</a>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ncomp;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> ballmeshnodescoo[3] = {0.0, 0.0, 0.0 };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> beammeshnodescoo[3*7] = {0.0,0.0,0.0,</div>
<div class="line">                                           0.0,0.0,2.0,</div>
<div class="line">                                           0.0,0.0,4.0,</div>
<div class="line">                                           0.0,0.0,5.0,</div>
<div class="line">                                           0.0,0.0,7.0,</div>
<div class="line">                                           0.0,0.0,10.0,</div>
<div class="line">                                           0.0,0.0,11.0 };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> beamsectioncoo[9*3] = {-0.2,-0.2,0.0,</div>
<div class="line">                                         0.0,-0.2,0.0,</div>
<div class="line">                                         0.2,-0.2,0.0,</div>
<div class="line">                                         -0.2, 0.0,0.0,</div>
<div class="line">                                         0.0, 0.0,0.0,</div>
<div class="line">                                         0.2, 0.0,0.0,</div>
<div class="line">                                         -0.2, 0.2,0.0,</div>
<div class="line">                                         0.0, 0.2,0.0,</div>
<div class="line">                                         0.2, 0.2,0.0 };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> seg2connectivity[2*6] = {1,2, 2,3, 3,4, 4,5, 5,6, 6,7};</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> spacedim, meshdim,nseg2;</div>
<div class="line">  <span class="comment">/*                                         123456789012345612345678901234561234567890123456 */</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> axisname[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;x               y               z               &quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> unitname[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;cm              cm              cm              &quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> attvalue[6] = {0.2,0.3,0.4,0.4,0.3,0.2};</div>
<div class="line">  <span class="comment">/*                                            1234567890123456789012345678901234567890123456789012345678901234        */</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> attprovalue[2*<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = {<span class="stringliteral">&quot;EXTREMITY_1_____________________________________________________&quot;</span> \</div>
<div class="line">                                               <span class="stringliteral">&quot;EXTREMITY_2_____________________________________________________&quot;</span> };</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> profilename[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;EXTREMITY_PROFILE_NAME&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profilesize = 2;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profile[2] = {1,6};</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> meshcoo[3*12] = { 0.0, 0.0, 0.0,</div>
<div class="line">                                    1.1, 1.1, 1.1,</div>
<div class="line">                                    2.2, 2.2, 2.2,</div>
<div class="line">                                    10., 10., 10.,</div>
<div class="line">                                    12., 12., 12.,</div>
<div class="line">                                    60., 20., 20.,</div>
<div class="line">                                    70., 20., 20.,</div>
<div class="line">                                    80., 20., 20.,</div>
<div class="line">                                    90., 20., 20.,</div>
<div class="line">                                    100., 20., 20.,</div>
<div class="line">                                    110., 20., 20.,</div>
<div class="line">                                    120., 20., 20.</div>
<div class="line">  };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> beamconnectivity[12] = {  6,7,</div>
<div class="line">                                          7,8,</div>
<div class="line">                                          8,9,</div>
<div class="line">                                          9,10,</div>
<div class="line">                                          10,11,</div>
<div class="line">                                          11,12 };</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nentity;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> labels[3] = { 1, 2, 3 }; <span class="comment">/* nodes numbers */</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ballconnectivity[2] = { 4, 5 }; <span class="comment">/* nodes numbers */</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> balldiameter[2] = { 2.0, 5.8 };</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nquad4=4;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> beamsectionconnectivity[4*4] = { 4,5,2,1,</div>
<div class="line">                                                 5,6,3,2,</div>
<div class="line">                                                 7,8,5,4,</div>
<div class="line">                                                 8,9,6,5};</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* file creation */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDstructElement_1.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85aa23dd1c18b596924d5f50c8402b84c8e">MED_ACC_CREAT</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : file creation&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* STEP 1 : support meshes creation */</span></div>
<div class="line">  spacedim =  3;</div>
<div class="line">  meshdim = 3;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Mesh 1 : support mesh for ball model */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01060_ga8d14cb8ed06c18d7a8c7a32d89b5ebd5.html#ga8d14cb8ed06c18d7a8c7a32d89b5ebd5">MEDsupportMeshCr</a>(fid, ballsupportname, spacedim, meshdim, <span class="stringliteral">&quot;Support mesh for a ball model&quot;</span>,</div>
<div class="line">                       MED_CARTESIAN, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating a support mesh ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* 1 node and no cell in the mesh */</span></div>
<div class="line">  nnode = 1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab2a6fcbbb0dfb0dba573320ed07f503b.html#gab2a6fcbbb0dfb0dba573320ed07f503b">MEDmeshNodeCoordinateWr</a>(fid, ballsupportname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                              MED_FULL_INTERLACE, nnode, ballmeshnodescoo) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Mesh 2 :support mesh for beam model */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01060_ga8d14cb8ed06c18d7a8c7a32d89b5ebd5.html#ga8d14cb8ed06c18d7a8c7a32d89b5ebd5">MEDsupportMeshCr</a>(fid, beamsupportname, spacedim, meshdim, <span class="stringliteral">&quot;Support mesh for a beam model&quot;</span>,</div>
<div class="line">                       MED_CARTESIAN, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating a support mesh ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* 7 nodes and 6 MED_SEG2 */</span></div>
<div class="line">  nnode = 7;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab2a6fcbbb0dfb0dba573320ed07f503b.html#gab2a6fcbbb0dfb0dba573320ed07f503b">MEDmeshNodeCoordinateWr</a>(fid, beamsupportname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                              MED_FULL_INTERLACE, nnode,  beammeshnodescoo) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  nseg2 = 6;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga091f97ef25e5bb96e3d941b85131cea9.html#ga091f97ef25e5bb96e3d941b85131cea9">MEDmeshElementConnectivityWr</a>(fid, beamsupportname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0, MED_CELL, <a class="code" href="a00577_a29927daaa1a87f2129295a68264ad526.html#a29927daaa1a87f2129295a68264ad526">MED_SEG2</a>,</div>
<div class="line">                                   MED_NODAL, MED_FULL_INTERLACE, nseg2, seg2connectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write cells connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Mesh 3 : support mesh to define a section for integration points of</span></div>
<div class="line"><span class="comment">     a struct element */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01060_ga8d14cb8ed06c18d7a8c7a32d89b5ebd5.html#ga8d14cb8ed06c18d7a8c7a32d89b5ebd5">MEDsupportMeshCr</a>(fid, beamsectionname, spacedim, meshdim, <span class="stringliteral">&quot;Support mesh for a section of the beam model&quot;</span>,</div>
<div class="line">                       MED_CARTESIAN, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating a support mesh ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  nnode = 9;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab2a6fcbbb0dfb0dba573320ed07f503b.html#gab2a6fcbbb0dfb0dba573320ed07f503b">MEDmeshNodeCoordinateWr</a>(fid, beamsectionname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                              MED_FULL_INTERLACE, nnode, beamsectioncoo) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga091f97ef25e5bb96e3d941b85131cea9.html#ga091f97ef25e5bb96e3d941b85131cea9">MEDmeshElementConnectivityWr</a>(fid, beamsectionname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0, MED_CELL, <a class="code" href="a00577_a24ea9c52f5bde41d9a072925249ec06c.html#a24ea9c52f5bde41d9a072925249ec06c">MED_QUAD4</a>,</div>
<div class="line">                                   MED_NODAL, MED_FULL_INTERLACE, nquad4, beamsectionconnectivity) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : write cells connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* STEP 2 */</span></div>
<div class="line">  <span class="comment">/* particle model creation : no support mesh */</span></div>
<div class="line">  strcpy(elementname,<a class="code" href="a00577_a786e7850e4d89a31047496e6fd48476d.html#a786e7850e4d89a31047496e6fd48476d">MED_PARTICLE_NAME</a>);</div>
<div class="line">  <span class="keywordflow">if</span> ((geotype = <a class="code" href="a01058_ga018cf42798055d8cd2a8ec80f733d31d.html#ga018cf42798055d8cd2a8ec80f733d31d">MEDstructElementCr</a>(fid, elementname, elementdim, <a class="code" href="a00577_aff82475025000f628497e5c0d7117bcf.html#aff82475025000f628497e5c0d7117bcf">MED_NO_MESHNAME</a>,</div>
<div class="line">                                    MED_NONE,MED_NONE)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  ncomp=1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01058_gab486f3f6ba5622b8e22562286921bdd1.html#gab486f3f6ba5622b8e22562286921bdd1">MEDstructElementVarAttCr</a>(fid, elementname,</div>
<div class="line">                               <a class="code" href="a00577_a1ccd58b1b04b04136557b619d5ce4c9d.html#a1ccd58b1b04b04136557b619d5ce4c9d">MED_PARTICLE_LABEL</a>, <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8add7fd38889e057c70ed529bac85db4ee">MED_ATT_INT</a>, ncomp) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* ball model creation */</span></div>
<div class="line">  strcpy(elementname,<a class="code" href="a00577_aa86785fc7c9bc73e184da6e687f79f2b.html#aa86785fc7c9bc73e184da6e687f79f2b">MED_BALL_NAME</a>);</div>
<div class="line">  <span class="keywordflow">if</span> ((geotype = <a class="code" href="a01058_ga018cf42798055d8cd2a8ec80f733d31d.html#ga018cf42798055d8cd2a8ec80f733d31d">MEDstructElementCr</a>(fid, elementname, elementdim, ballsupportname,</div>
<div class="line">                                    <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  ncomp=1;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01058_gab486f3f6ba5622b8e22562286921bdd1.html#gab486f3f6ba5622b8e22562286921bdd1">MEDstructElementVarAttCr</a>(fid, elementname,</div>
<div class="line">                               <a class="code" href="a00577_a0bd406d126080383a267241ac784fb41.html#a0bd406d126080383a267241ac784fb41">MED_BALL_DIAMETER</a>, <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8acdee779d6931de0b056721831ae6bd95">MED_ATT_FLOAT64</a>, ncomp) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* A beam */</span></div>
<div class="line">  strcpy(elementname,<a class="code" href="a00577_a738baa2a243efa4f2e957c2a75b616c1.html#a738baa2a243efa4f2e957c2a75b616c1">MED_BEAM_NAME</a>);</div>
<div class="line">  <span class="keywordflow">if</span> ((geotype = <a class="code" href="a01058_ga018cf42798055d8cd2a8ec80f733d31d.html#ga018cf42798055d8cd2a8ec80f733d31d">MEDstructElementCr</a>(fid, elementname, elementdim, beamsupportname,</div>
<div class="line">                                    MED_CELL,<a class="code" href="a00577_a29927daaa1a87f2129295a68264ad526.html#a29927daaa1a87f2129295a68264ad526">MED_SEG2</a>)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  ncomp=1;</div>
<div class="line">  <span class="comment">/* a first constant attribute */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01058_ga4076c307f43a271a12071bb74b0690ef.html#ga4076c307f43a271a12071bb74b0690ef">MEDstructElementConstAttWr</a>(fid, elementname,</div>
<div class="line">                                 <a class="code" href="a00577_ac02c21964d5854d4a3a64a1fed762bad.html#ac02c21964d5854d4a3a64a1fed762bad">MED_BEAM_THICKNESS</a>, <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8acdee779d6931de0b056721831ae6bd95">MED_ATT_FLOAT64</a>, ncomp,</div>
<div class="line">                                 MED_CELL,(<span class="keywordtype">void</span>*) attvalue) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* a second constant attribute defined with a profile for the first and the</span></div>
<div class="line"><span class="comment">     last segment */</span></div>
<div class="line">  <span class="comment">/* create the profile */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01057_gaf7ec6ed01898dcfe98556f399ed044d1.html#gaf7ec6ed01898dcfe98556f399ed044d1">MEDprofileWr</a>(fid, profilename, profilesize, profile ) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : create profile ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* write the constant attribute */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01058_ga10af186c4d6fa0cfd0aa3a6b2c90c0a4.html#ga10af186c4d6fa0cfd0aa3a6b2c90c0a4">MEDstructElementConstAttWithProfileWr</a>(fid,</div>
<div class="line">                                            elementname,</div>
<div class="line">                                            <span class="stringliteral">&quot;BEAM_EXTREMITIES_LABELS&quot;</span>,</div>
<div class="line">                                            <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8af8c39990c775c4813629cfb6947cbc9e">MED_ATT_NAME</a>,</div>
<div class="line">                                            ncomp,</div>
<div class="line">                                            MED_CELL,</div>
<div class="line">                                            profilename,</div>
<div class="line">                                            (<span class="keywordtype">void</span>*) attprovalue) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating struct element&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* STEP 3 : Computation mesh creation */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* mesh creation */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga6007c3f1a62732e7a46c5eca232be78a.html#ga6007c3f1a62732e7a46c5eca232be78a">MEDmeshCr</a>(fid, computmeshname, spacedim, meshdim,  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1a3719e53a4838d222f0a58148292fda41">MED_UNSTRUCTURED_MESH</a>,</div>
<div class="line">                <span class="stringliteral">&quot;Computation mesh&quot;</span>, <span class="stringliteral">&quot;s&quot;</span>, MED_SORT_DTIT,</div>
<div class="line">                MED_CARTESIAN, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : creating computation mesh ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* mesh node creation */</span></div>
<div class="line">  nnode = 12;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab2a6fcbbb0dfb0dba573320ed07f503b.html#gab2a6fcbbb0dfb0dba573320ed07f503b">MEDmeshNodeCoordinateWr</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_UNDEF_DT,</div>
<div class="line">                              MED_FULL_INTERLACE, nnode, meshcoo) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : writing nodes coordinates ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* 1 beam */</span></div>
<div class="line">  nentity = 1;</div>
<div class="line">  <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(elementname);</div>
<div class="line">  geotype = <a class="code" href="a01058_gaf49779dbddeb78a562de0f913d3d087c.html#gaf49779dbddeb78a562de0f913d3d087c">MEDstructElementGeotype</a>(fid,elementname);</div>
<div class="line">  <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(geotype);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga091f97ef25e5bb96e3d941b85131cea9.html#ga091f97ef25e5bb96e3d941b85131cea9">MEDmeshElementConnectivityWr</a>(fid,computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_UNDEF_DT,</div>
<div class="line">                                   <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>, geotype, MED_NODAL,</div>
<div class="line">                                   MED_FULL_INTERLACE, nentity, beamconnectivity) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : beam connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Get the dynamic geometry type of each struct element model.</span></div>
<div class="line"><span class="comment">     Then for each type, write the connectivity and variable(s) attribute(s) */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* 3 particles in the mesh */</span></div>
<div class="line">  strcpy(elementname,<a class="code" href="a00577_a786e7850e4d89a31047496e6fd48476d.html#a786e7850e4d89a31047496e6fd48476d">MED_PARTICLE_NAME</a>);</div>
<div class="line">  geotype = <a class="code" href="a01058_gaf49779dbddeb78a562de0f913d3d087c.html#gaf49779dbddeb78a562de0f913d3d087c">MEDstructElementGeotype</a>(fid,elementname);</div>
<div class="line">  nentity = 3;</div>
<div class="line">  <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(geotype);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga091f97ef25e5bb96e3d941b85131cea9.html#ga091f97ef25e5bb96e3d941b85131cea9">MEDmeshElementConnectivityWr</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, 0.0,</div>
<div class="line">                                   <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>, geotype , MED_NODAL, MED_FULL_INTERLACE,</div>
<div class="line">                                   nentity, 0) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : writing particles connectivity ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* no support mesh =&gt; no connectivity, the particles are localized with an association between</span></div>
<div class="line"><span class="comment">     the mesh nodes and the label attribute defined in the struct model */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01058_gabebaf350609299e314c5950be79b0855.html#gabebaf350609299e314c5950be79b0855">MEDmeshStructElementVarAttWr</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT,</div>
<div class="line">                                   geotype, <a class="code" href="a00577_a1ccd58b1b04b04136557b619d5ce4c9d.html#a1ccd58b1b04b04136557b619d5ce4c9d">MED_PARTICLE_LABEL</a>,</div>
<div class="line">                                   nentity, labels) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : writing variable attributes  ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* 2 balls */</span></div>
<div class="line">  strcpy(elementname,<a class="code" href="a00577_aa86785fc7c9bc73e184da6e687f79f2b.html#aa86785fc7c9bc73e184da6e687f79f2b">MED_BALL_NAME</a>);</div>
<div class="line">  nentity = 2;</div>
<div class="line">  geotype = <a class="code" href="a01058_gaf49779dbddeb78a562de0f913d3d087c.html#gaf49779dbddeb78a562de0f913d3d087c">MEDstructElementGeotype</a>(fid,elementname);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga091f97ef25e5bb96e3d941b85131cea9.html#ga091f97ef25e5bb96e3d941b85131cea9">MEDmeshElementConnectivityWr</a>(fid,computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_UNDEF_DT,</div>
<div class="line">                                   <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>, geotype, MED_NODAL,</div>
<div class="line">                                   MED_FULL_INTERLACE, nentity, ballconnectivity) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : writing balls connectivity&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* variable attribute : write ball diameter */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01058_gabebaf350609299e314c5950be79b0855.html#gabebaf350609299e314c5950be79b0855">MEDmeshStructElementVarAttWr</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT,</div>
<div class="line">                                   geotype, <a class="code" href="a00577_a0bd406d126080383a267241ac784fb41.html#a0bd406d126080383a267241ac784fb41">MED_BALL_DIAMETER</a>,</div>
<div class="line">                                   nentity, balldiameter) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : writing variable attributes ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : file closing&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><p>La routine <a class="el" href="a01058_gae72636de4cc37f6833ea7ee4b831d363.html#gae72636de4cc37f6833ea7ee4b831d363">MEDstructElementInfoByName</a> / <a class="el" href="a00813_a828b9c113fbc1ebee646a89fadfd5704.html#a828b9c113fbc1ebee646a89fadfd5704">msesin</a> permet de récupérer les informations relatives à un modèle d'élément de structure dont on conna&icirc;t le nom. Un autre mode d'accès en lecture consiste à utiliser la routine <a class="el" href="a01058_ga09f7085855b24af662c32291d0816a59.html#ga09f7085855b24af662c32291d0816a59">MEDnStructElement</a> / <a class="el" href="a00813_ae14abb17891b6f1f480ebc88c6e080a6.html#ae14abb17891b6f1f480ebc88c6e080a6">msense</a> pour lire le nombre de modèle dans un fichier. Il s'agit ensuite d'itérer sur ces modèles. La routine <a class="el" href="a01058_ga6caf4937712d2a1d39ab1fd1482f61a3.html#ga6caf4937712d2a1d39ab1fd1482f61a3">MEDstructElementInfo</a> / <a class="el" href="a00813_ade1dab05fe45f14eb5bac31d4fd6cad5.html#ade1dab05fe45f14eb5bac31d4fd6cad5">msesei</a> permet de lire à chaque itération les informations relatives à un modèle d'élément de structure. Pour ce qui concerne la lecture des attributs constants, la routine <a class="el" href="a01058_gae18e73993c83d627ef6f3684694ab930.html#gae18e73993c83d627ef6f3684694ab930">MEDstructElementConstAttInfo</a> / <a class="el" href="a00813_ad8857ccbcfc7ff55deb000b9b19d5d63.html#ad8857ccbcfc7ff55deb000b9b19d5d63">msecai</a> permet de lire les informations relatives à ce type d'attribut et les routines <a class="el" href="a01058_gad1ed6ae520fcf95a45b6496b32a7a530.html#gad1ed6ae520fcf95a45b6496b32a7a530">MEDstructElementConstAttRd</a> / <a class="el" href="a00813_a51727887d739a3b3732ba470e596ce3f.html#a51727887d739a3b3732ba470e596ce3f">mserar</a>, <a class="el" href="a00813_a3d106f2ce183a5d1bab0bceddf5ca8fd.html#a3d106f2ce183a5d1bab0bceddf5ca8fd">mseiar</a>, <a class="el" href="a00813_aae3d520c36392441c49f4ae22aa06285.html#aae3d520c36392441c49f4ae22aa06285">msesar</a> permettent de lire les valeurs d'un attribut constant sans et avec un profil. Pour ce qui concerne les attributs variables, la routine <a class="el" href="a01058_ga0cc47995358440cb879ce89fd34eefc5.html#ga0cc47995358440cb879ce89fd34eefc5">MEDstructElementVarAttInfo</a> / <a class="el" href="a00813_ae7890c940eaa1f8c6d53f6893d0543ba.html#ae7890c940eaa1f8c6d53f6893d0543ba">msevai</a> permet de lire les informations relatives à ce type d'attribut et les routines <a class="el" href="a01058_gadaad15d6beac5cd36a36587894afa35c.html#gadaad15d6beac5cd36a36587894afa35c">MEDmeshStructElementVarAttRd</a> / <a class="el" href="a00716_a3d46a75ff03a715feb119b7e396bd23d.html#a3d46a75ff03a715feb119b7e396bd23d">mmhrar</a>, <a class="el" href="a00716_ab9dae00e51b20ccdd76a22ea3922b5c4.html#ab9dae00e51b20ccdd76a22ea3922b5c4">mmhiar</a>, <a class="el" href="a00716_a38f1a310bad64fd75c1764da37bea06e.html#a38f1a310bad64fd75c1764da37bea06e">mmhsar</a> permettent de lire les valeurs d'un attribut variable. </p>
<p>A noter également l'existence : de la routine <a class="el" href="a01058_gab6cc5a1b97bee5ee0126092dd9d65771.html#gab6cc5a1b97bee5ee0126092dd9d65771">MEDstructElementName</a> / <a class="el" href="a00813_a43e688e823d3ddd0c1c559451a3894ae.html#a43e688e823d3ddd0c1c559451a3894ae">msesen</a> qui à partir du numéro de type géométrique de l'élément de structure, fournit le nom de cet élément ; de la routine <a class="el" href="a01058_gaf49779dbddeb78a562de0f913d3d087c.html#gaf49779dbddeb78a562de0f913d3d087c">MEDstructElementGeotype</a> / <a class="el" href="a00813_a83627d3323d4af0d0546f5585fdd7fcb.html#a83627d3323d4af0d0546f5585fdd7fcb">msesgt</a> qui à partir du nom de l'élément renvoie son type. Enfin la routine <a class="el" href="a01058_gaa43425a37777eb91bfa33f3b874087f9.html#gaa43425a37777eb91bfa33f3b874087f9">MEDstructElementAttSizeof</a> / <a class="el" href="a01073_gab1cd10c94f2ebafc51805c5490597253.html#gab1cd10c94f2ebafc51805c5490597253">mseasz</a> renvoie la taille en octets du type élémentaire d'un attribut constant ou variable, ce qui permet d'allouer correctement la taille des tableaux pour lire les valeurs des attributs. </p>
<p>La routine <a class="el" href="a01060_ga3d3676f1d3f031c34f4383f950f0baa5.html#ga3d3676f1d3f031c34f4383f950f0baa5">MEDsupportMeshInfoByName</a> / <a class="el" href="a00839_aed1bba40be52fad63bbecb0388a6722a.html#aed1bba40be52fad63bbecb0388a6722a">msmsni</a> permet de récupérer les informations relatives à un maillage support dont on conna&icirc;t le nom. Un autre mode d'accès en lecture consiste à utiliser la routine <a class="el" href="a01060_ga19e188df09fd462a4a91a6c5dd6ffe7d.html#ga19e188df09fd462a4a91a6c5dd6ffe7d">MEDnSupportMesh</a> / <a class="el" href="a00839_aae8ae70328938d4c2b2fb620b81314fa.html#aae8ae70328938d4c2b2fb620b81314fa">msmnsm</a> afin de lire le nombre de maillage support dans un fichier. Il s'agit ensuite d'itérer sur ces maillages support et à chaque itération de lire les informations relative au maillage avec la routine <a class="el" href="a01060_ga23ddf2e0ab45f4e7a37be051aa5753e4.html#ga23ddf2e0ab45f4e7a37be051aa5753e4">MEDsupportMeshInfo</a> / <a class="el" href="a00839_a051b0cd632e7bd97804bfd939cdbc25e.html#a051b0cd632e7bd97804bfd939cdbc25e">msmsmi</a>. La lecture des coordonnées des noeuds et de la connectivité des mailles se fait avec les mêmes routines que celles utilisées pour les maillages de calcul.</p>
<p>Ce cas d'utilisation montre comment à partir d'un maillage de calcul, accéder aux modèles d'éléments de structure et aux maillages supports.</p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* </span></div>
<div class="line"><span class="comment"> * StructElement use case 3 : read struct element models in a file from a computation mesh </span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nmodels, nsmesh;</div>
<div class="line">  <span class="keywordtype">int</span> i,j;</div>
<div class="line">  <span class="keywordtype">char</span> elementname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> supportmeshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> computmeshname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;COMPUT_MESH&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> *geotype;</div>
<div class="line">  <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> entitype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> elementdim;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnode,ncell;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> geocelltype;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> anyprofile=0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nconstatt, *nvaratt=NULL;</div>
<div class="line">  <span class="keywordtype">char</span> attname[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> profilename[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8">med_attribute_type</a> atttype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nattcomp;</div>
<div class="line">  <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> attentitype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> profilesize;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *value=NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> size=0;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshdim, spacedim;</div>
<div class="line">  <span class="keywordtype">char</span> description[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> axisname[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> axisunit[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> axistype;</div>
<div class="line">  <a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *coordinates=NULL;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> coordinatechangement;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> geotransformation;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nseg2;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *seg2connectivity=NULL;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nentities=0;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sortingtype;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> meshtype;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep;</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> unitname[2*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">int</span> ret=-1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* open file */</span></div>
<div class="line">  fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;UsesCase_MEDstructElement_1.med&quot;</span>,<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (fid &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : file creation ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* </span></div>
<div class="line"><span class="comment">   * ... In this case, we know that the MED file has only one mesh, </span></div>
<div class="line"><span class="comment">   * a real code would check ... </span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  <span class="comment">/* read mesh informations : mesh dimension, space dimension ... */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gaf5e84a05155579ded1ba18a672385f97.html#gaf5e84a05155579ded1ba18a672385f97">MEDmeshInfoByName</a>(fid, computmeshname, &amp;spacedim, &amp;meshdim, &amp;meshtype, description, </div>
<div class="line">                        dtunit, &amp;sortingtype, &amp;nstep, &amp;axistype, axisname, unitname) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : mesh info ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read how many struct element models in the mesh ? */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((nmodels = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>, <a class="code" href="a00577_ad9a7aaf0f9d302fa8e22f98cb8fe0371.html#ad9a7aaf0f9d302fa8e22f98cb8fe0371">MED_GEO_ALL</a>,</div>
<div class="line">                              <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bab36865870154d1aa71cda04491911275">MED_UNDEF_DATATYPE</a>, MED_NO_CMODE,&amp;coordinatechangement,</div>
<div class="line">                              &amp;geotransformation)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of nodes ...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  geotype = (<a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a>)*nmodels);</div>
<div class="line">  nvaratt = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nmodels);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Get the name and the geotype of each struct element model used in the computation mesh.</span></div>
<div class="line"><span class="comment">     For each struct element geotype read the connectivity and the attribute(s) </span></div>
<div class="line"><span class="comment">     The mesh support may be read if needed.</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i=0;i&lt;nmodels;i++) {</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read the geotype */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01055_ga2f2759063b94d0b418dff7aa7a985891.html#ga2f2759063b94d0b418dff7aa7a985891">MEDmeshEntityInfo</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>,i+1,elementname,(geotype+i)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : name and type of MED_STRUCT_ELEMENT ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read how many MED_STRUCT_ELEMENT of type *(geotype+i) there is in the mesh */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((nentities = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470abdd6b14142920f599bbe4e97c4bb921e">MED_STRUCT_ELEMENT</a>,*(geotype+i),</div>
<div class="line">                                    MED_CONNECTIVITY, MED_NODAL, &amp;coordinatechangement,</div>
<div class="line">                                    &amp;geotransformation)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of MED_STRUCT_ELEMENT ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read informations about the model */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01058_gae72636de4cc37f6833ea7ee4b831d363.html#gae72636de4cc37f6833ea7ee4b831d363">MEDstructElementInfoByName</a>(fid, elementname, geotype+i, &amp;elementdim,</div>
<div class="line">                                   supportmeshname, &amp;entitype, &amp;nnode, &amp;ncell,</div>
<div class="line">                                   &amp;geocelltype, &amp;nconstatt, &amp;anyprofile, nvaratt+i) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : struct element models information ...&quot;</span>);</div>
<div class="line">      <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* read support mesh  */</span></div>
<div class="line">    <span class="comment">/* TODO : Ceci est optionnel dans ce usescase */</span> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(supportmeshname,<span class="stringliteral">&quot;&quot;</span>)) {</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="a01060_ga3d3676f1d3f031c34f4383f950f0baa5.html#ga3d3676f1d3f031c34f4383f950f0baa5">MEDsupportMeshInfoByName</a>(fid, supportmeshname, &amp;spacedim, &amp;meshdim, description,</div>
<div class="line">                                    &amp;axistype, axisname, axisunit) &lt; 0 ) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read information about mesh support ...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(nnode);</div>
<div class="line">      <span class="comment">/* read how many nodes in the support mesh */</span></div>
<div class="line">      <span class="comment">/* Ceci est optionnel dans ce usescase */</span> </div>
<div class="line">      <span class="keywordflow">if</span> ((nnode = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, supportmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>, MED_NONE,</div>
<div class="line">                                  <a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>, MED_NO_CMODE,&amp;coordinatechangement,</div>
<div class="line">                                  &amp;geotransformation)) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read number of nodes ...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line">     <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(nnode);</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* read support mesh nodes coordinates */</span></div>
<div class="line">      <span class="comment">/* Ceci est optionnel dans ce usescase */</span> </div>
<div class="line">      coordinates = (<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a>)*nnode*spacedim);</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a01055_ga392a4bd4e6d340020755de7353f8a528.html#ga392a4bd4e6d340020755de7353f8a528">MEDmeshNodeCoordinateRd</a>(fid, supportmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_FULL_INTERLACE,</div>
<div class="line">                                  coordinates) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read nodes coordinates ...&quot;</span>);</div>
<div class="line">        free(coordinates);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* free memory */</span></div>
<div class="line">      free(coordinates);</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* read how many MED_SEG2 cells in the support mesh */</span></div>
<div class="line">      <span class="comment">/* Ceci est optionnel dans ce usescase */</span> </div>
<div class="line">      <span class="keywordflow">if</span> ((nseg2 = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid, supportmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,geocelltype,</div>
<div class="line">                                  MED_CONNECTIVITY, MED_NODAL, &amp;coordinatechangement,</div>
<div class="line">                                  &amp;geotransformation)) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : number of MED_SEG2 ...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line">     <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(nseg2);</div>
<div class="line">     <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(ncell);</div>
<div class="line">      <span class="comment">/* read MED_SEG2 connectivity in the support mesh */</span></div>
<div class="line">      <span class="keywordflow">if</span> (nseg2 &gt; 0) {</div>
<div class="line">        seg2connectivity = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nseg2*2);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a01055_ga014f716ad13c72466b4aa94237876bf5.html#ga014f716ad13c72466b4aa94237876bf5">MEDmeshElementConnectivityRd</a>(fid, supportmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT, MED_CELL,</div>
<div class="line">                                         geocelltype, MED_NODAL, MED_FULL_INTERLACE, seg2connectivity) &lt; 0) {</div>
<div class="line">          <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : MED_SEG2 connectivity ...&quot;</span>);</div>
<div class="line">          free(seg2connectivity);</div>
<div class="line">          <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">        }</div>
<div class="line">        free(seg2connectivity);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read constant attribute(s) */</span></div>
<div class="line">    <span class="comment">/* Optionnel pour ce usescase (cf. usescase lecture modèle) */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j=0; j&lt;nconstatt; j++) {</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="a01058_gae18e73993c83d627ef6f3684694ab930.html#gae18e73993c83d627ef6f3684694ab930">MEDstructElementConstAttInfo</a>(fid, elementname, j+1,</div>
<div class="line">                                        attname, &amp;atttype, &amp;nattcomp, &amp;attentitype,</div>
<div class="line">                                        profilename, &amp;profilesize) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : const attribute information ...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* if there is a profile =&gt; read the profile, see UsesCase_MEDprofile_2 */</span></div>
<div class="line"></div>
<div class="line">      <span class="comment">/* memory allocation */</span></div>
<div class="line">      <span class="keywordflow">if</span> (profilesize != 0)</div>
<div class="line">        size = profilesize*nattcomp*<a class="code" href="a01058_gaa43425a37777eb91bfa33f3b874087f9.html#gaa43425a37777eb91bfa33f3b874087f9">MEDstructElementAttSizeof</a>(atttype);</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">if</span> (attentitype== <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>)</div>
<div class="line">          size = nnode*nattcomp*<a class="code" href="a01058_gaa43425a37777eb91bfa33f3b874087f9.html#gaa43425a37777eb91bfa33f3b874087f9">MEDstructElementAttSizeof</a>(atttype);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          size = ncell*nattcomp*<a class="code" href="a01058_gaa43425a37777eb91bfa33f3b874087f9.html#gaa43425a37777eb91bfa33f3b874087f9">MEDstructElementAttSizeof</a>(atttype);</div>
<div class="line">      <span class="keywordflow">if</span> ( atttype == <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8af8c39990c775c4813629cfb6947cbc9e">MED_ATT_NAME</a>) ++size;</div>
<div class="line">      <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(size);</div>
<div class="line">      value = (<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *) malloc(size);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">      <span class="comment">/* read attribute(s) value(s) */</span></div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="a01058_gad1ed6ae520fcf95a45b6496b32a7a530.html#gad1ed6ae520fcf95a45b6496b32a7a530">MEDstructElementConstAttRd</a>(fid, elementname, attname, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)value ) &lt; 0 ) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : const attribute value ...&quot;</span>);</div>
<div class="line">        free(value);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* memory deallocation */</span></div>
<div class="line">      free(value);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* read variable attribute(s) */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j=0; j&lt;*(nvaratt+i); j++) {</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* read informations about the attribute */</span></div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="a01058_ga0cc47995358440cb879ce89fd34eefc5.html#ga0cc47995358440cb879ce89fd34eefc5">MEDstructElementVarAttInfo</a>(fid, elementname, j+1, </div>
<div class="line">                                      attname, &amp;atttype, &amp;nattcomp) &lt; 0) {</div>
<div class="line">            <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : var attribute information ...&quot;</span>);</div>
<div class="line">            <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line">      </div>
<div class="line">      <span class="comment">/* memory allocation */</span></div>
<div class="line">      size = nentities*nattcomp*<a class="code" href="a01058_gaa43425a37777eb91bfa33f3b874087f9.html#gaa43425a37777eb91bfa33f3b874087f9">MEDstructElementAttSizeof</a>(atttype);</div>
<div class="line">      <span class="keywordflow">if</span> ( atttype == <a class="code" href="a00577_ab6689ff0f472c1b88f02f030d34825b8.html#ab6689ff0f472c1b88f02f030d34825b8af8c39990c775c4813629cfb6947cbc9e">MED_ATT_NAME</a>) ++size;</div>
<div class="line">      <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(size);</div>
<div class="line">      value = (<a class="code" href="a00577_ab1eab99ca56ac95ce5b1c0e4ae0f095a.html#ab1eab99ca56ac95ce5b1c0e4ae0f095a">med_float</a> *) malloc((size)*<span class="keyword">sizeof</span>(char));</div>
<div class="line">      </div>
<div class="line">      <span class="comment">/* read attribute values */</span></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a01058_gadaad15d6beac5cd36a36587894afa35c.html#gadaad15d6beac5cd36a36587894afa35c">MEDmeshStructElementVarAttRd</a>(fid, computmeshname, <a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>, MED_NO_IT,</div>
<div class="line">                                       *(geotype+i), attname, value ) &lt; 0) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : read variable attributes values ...&quot;</span>);</div>
<div class="line">        free(value);</div>
<div class="line">        <span class="keywordflow">goto</span> ERROR;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* free memory */</span></div>
<div class="line">      free(value);</div>
<div class="line">      </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  ret=0;</div>
<div class="line"> ERROR:</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* free memory */</span></div>
<div class="line">  free(geotype);</div>
<div class="line">  free(nvaratt);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* close file */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;ERROR : file closing ...&quot;</span>);</div>
<div class="line">    ret=-1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><p><br />
<br />
</p>
<h1><a class="anchor" id="6."></a>Ecriture et lecture en parallèle par la décomposition de domaine </h1>
<p>En vue de calculs parallèles, le domaine de calcul est subdivisé en sous-domaines o&ugrave; se répartissent les maillages. Classiquement, chaque sous-domaine sera traité par un seul processeur qui aura uniquement accès aux données des autres sous-domaines par l'intermédiaire de messages.</p>
<div class="image">
<img src="./png/sous-domaines.png"  name="Image4" align="BOTTOM" width="508" height="617" border="0"/>
</div>
 <p><br />
Du point de vue du stockage, un maillage distribué a la même structure qu'un maillage MED classique mais ses composantes (entités géométrique, familles, groupes) peuvent être réparties sur plusieurs sous-domaines affectés à des processeurs disjoints. Lors de cette distribution certains sommets, faces, arêtes ou mailles se retrouvent sur la frontière commune de deux sous-domaines. L'ensemble de ces éléments communs à deux sous-domaines constitue un joint. Dans un cadre très général, les éléments communs à deux sous-domaines peuvent appara&icirc;tre comme : la jointure de deux maillages qui se correspondent parfaitement (on parle alors de <em>raccordement conforme), </em>la jointure de deux maillages de pavage différent (<em>raccordement non conforme),</em> le recouvrement de deux maillages qu'il soit conforme ou non. </p>
<p>La notion de joint est assez générale pour permettre de stocker ces trois types d'interface. Elle consiste à donner la liste des couples des numéros correspondant des entités en regard vues du domaine local et vues du domaine distant. </p>
<p><br />
 </p>
<div class="image">
<img src="./png/description-joint.png"  name="Image5" align="BOTTOM" width="627" height="275" border="0"/>
</div>
 <p><a class="anchor" id="1.3"></a><br />
Un maillage distribué est donc entièrement déterminé par la donnée des maillages affectés à chacun des sous-domaines, par la définition de &laquo; joints &raquo; - raccord entre les maillages de sous-domaines voisins, par une numérotation globale optionnelle des entités. </p>
<p>Comme les maillages sont distribués, les données MED s'y rattachant peuvent être stockées dans plusieurs fichiers. La liste de ces fichiers est rassemblée dans un fichier ma&icirc;tre au format ASCII. Ce fichier permet de repérer o&ugrave; se trouvent stockées les parties de maillages distribuées correspondant à chaque sous-domaine. Il contient : un entête d'identification ; le nombre de sous-domaines sur lesquels sont distribués les maillages ; les informations nécessaires pour repérer les parties de maillages affectées à chaque sous-domaine. Pour ce faire, il y a autant de lignes que de parties de maillages distribués. Chaque ligne se compose : du nom de maillage global, du numéro de sous-domaine concerné, du nom de maillage local correspondant au maillage global sur ce sous-domaine, du nom de la machine hébergeant le fichier MED contenant ces informations (ce nom peut éventuellement être une adresse IP de la machine et ne comportera pas de blanc), du chemin absolu ou relatif menant à ce fichier </p>
<p>Le fichier ASCII sera au format unix, et le retour à la ligne est un caractère ASCII 10 (caractère Carriage Return seul sans caractère Line Feed comme sous windows). Dans les chemins, les sous répertoires seront délimités par le caractère '/'. Toute ligne commen&ccedil;ant par '#' sera ignorée par la librairie (commentaires). Mais un '#' en cours de ligne ne sera pas interprété comme un commentaire. <br />
<br />
Les fichiers MED correspondant à chaque sous-domaine sont repérés par leur chemin absolu ou relatif dans le système de fichier. Dans le cas relatif, l'accès aux fichiers depuis la librairie pourra dépendre de la machine ou du système d'exploitation sur lequel on s'exécute. A charge de l'utilisateur de vérifier l'interprétation cohérente des chemins de fichiers relatifs. <br />
<br />
<br />
 </p>
<div class="image">
<img src="./png/temp-vitesse.png"  name="Image6" align="BOTTOM" width="618" height="479" border="0"/>
</div>
 <p><br />
<br />
<br />
 </p>
<p>Voici un exemple de fichier ma&icirc;tre, décrivant la répartition de 2 maillages VIT et TEMP sur 4 sous domaines disjoints. Le calcul s'effectue sur un solide (o&ugrave; seule est définie la température) baignée d'un liquide (ou sont définies les vitesses et températures) </p>
<pre># MED Fichier v3.0
#
# Nombre de sous-domaines
4
#
# fichiers MED par sous-domaine
VIT 1 VIT_1 localhost /absolute/path/fichier_dom_1
VIT 2 VIT_2 localhost /absolute/path/fichier_dom_2
TEMP 1 TEMP_1 localhost /absolute/path/fichier_dom_1
TEMP 2 TEMP_2 localhost /absolute/path/fichier_dom_2
TEMP 3 TEMP_3 localhost /absolute/path/fichier_dom_3
TEMP 4 TEMP_4 localhost /absolute/path/fichier_dom_4</pre><p>La création ou la transformation du fichier ma&icirc;tre est à la charge du découpeur. On suppose que ce fichier est cohérent dans l'utilisation de la librairie.</p>
<p>A l'écriture, les routines disponibles permettent de : créer un joint dans un maillage (<a class="el" href="a01059_gab139ed60d40b7a61416f46eb5ff2dac2.html#gab139ed60d40b7a61416f46eb5ff2dac2">MEDsubdomainJointCr</a> / <a class="el" href="a00692_a967b0b3fe45b38a26ef8bee3083c9703.html#a967b0b3fe45b38a26ef8bee3083c9703">msdjcr</a>) ; écrire un tableau de correspondances entre bin&ocirc;mes d'entités du maillage dans un joint (<a class="el" href="a01059_ga78dd95846735f895e33876bf69e1d5a4.html#ga78dd95846735f895e33876bf69e1d5a4">MEDsubdomainCorrespondenceWr</a> / <a class="el" href="a01074_ga1bfa5efab2c4edb54e5046707251c8ac.html#ga1bfa5efab2c4edb54e5046707251c8ac">msdcrw</a>) ; écrire la numérotation globale associée à un type d'entité pour la repérer sur le domaine global (<a class="el" href="a01055_ga7368d6375462e4390041bae334cfcb43.html#ga7368d6375462e4390041bae334cfcb43">MEDmeshGlobalNumberWr</a> / <a class="el" href="a00716_a556ce42f1aed2f6d9a87a5300701ae39.html#a556ce42f1aed2f6d9a87a5300701ae39">mmhgnw</a>).</p>
<p><br />
 </p>
<p>A la lecture, les routines disponibles permettent de : lire le nombre de joints dans un maillage (<a class="el" href="a01059_ga90067f55ea12412a0688c6c304204e65.html#ga90067f55ea12412a0688c6c304204e65">MEDnSubdomainJoint</a> / <a class="el" href="a01074_gad174a460873cbe35cc3d93daec020bd1.html#gad174a460873cbe35cc3d93daec020bd1">msdnjn</a>) ; lire les informations concernant un joint (<a class="el" href="a01059_ga25a6e4dff83d09a8f46ed161136bf44c.html#ga25a6e4dff83d09a8f46ed161136bf44c">MEDsubdomainJointInfo</a> / <a class="el" href="a00692_a30cf9dfc3d3d65234d16933deae2a5bf.html#a30cf9dfc3d3d65234d16933deae2a5bf">msdjni</a>), lire le nombre de couple en correspondance d'un type donné dans un joint (<a class="el" href="a01059_gafcee5c816538dcc38fabe842ee00c1c7.html#gafcee5c816538dcc38fabe842ee00c1c7">MEDsubdomainComputingStepInfo</a> / <a class="el" href="a00692_abdc2af50a919ae0ec50ec37f15ec6c2a.html#abdc2af50a919ae0ec50ec37f15ec6c2a">msdcsi</a>) ; lire le nombre d'entités en correspondance dans un joint pour un couple d'entités et une séquence de calcul donnés (<a class="el" href="a01059_ga47aeb9b5072799cc4a3a0e672ad5d29f.html#ga47aeb9b5072799cc4a3a0e672ad5d29f">MEDsubdomainCorrespondenceSize</a> / <a class="el" href="a00692_ab1d6e6d9186fbce2111e7031cb416745.html#ab1d6e6d9186fbce2111e7031cb416745">msdcsz</a>); lire les informations sur les couples d'entités en correspondance dans un joint pour une séquence de calcul donnée (<a class="el" href="a01059_gae6262eba284cc7118a1c6b2617d471b4.html#gae6262eba284cc7118a1c6b2617d471b4">MEDsubdomainCorrespondenceSizeInfo</a> / <a class="el" href="a00692_af2b0e91ece651744f10dc5cac8c25b2a.html#af2b0e91ece651744f10dc5cac8c25b2a">msdszi</a>) ; lire un tableau de correspondances entre bin&ocirc;mes d'entités du maillage dans un joint (<a class="el" href="a01059_ga5170722fcd38ed65987bea79c4ac9d3b.html#ga5170722fcd38ed65987bea79c4ac9d3b">MEDsubdomainCorrespondenceRd</a> / <a class="el" href="a00692_ae2cb7634189a49d02c34a8a73355b50e.html#ae2cb7634189a49d02c34a8a73355b50e">msdcrr</a>) ; lire la numérotation globale associée à un type d'entité pour la repérer sur le domaine global (<a class="el" href="a01055_gab28f41670fee25385d66d45a0d86d93f.html#gab28f41670fee25385d66d45a0d86d93f">MEDmeshGlobalNumberRd</a> / <a class="el" href="a00716_aad05a0bbb3dd90936857ce5b0dfecb8e.html#aad05a0bbb3dd90936857ce5b0dfecb8e">mmhgnr</a>).</p>
<p>Les cas d'utilisation suivant illustrent comment écrire et lire des maillages avec des joints et un système de numérotation global.</p>
<div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * - Nom du fichier : test29.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * - Description : ecriture d&#39;un joint dans un maillage MED </span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *****************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef DEF_LECT_ECR</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDWR</span></div>
<div class="line"><span class="preprocessor">#elif DEF_LECT_AJOUT</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDEXT</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_CREAT</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">{</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">char</span> maa[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]= <span class="stringliteral">&quot;maa1&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> jnt[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1] = <span class="stringliteral">&quot;joint&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> des_jnt[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1] = <span class="stringliteral">&quot;joint avec le sous-domaine 2&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> maa_distant[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1]= <span class="stringliteral">&quot;maa1&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> dom_dist = 2;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> mdim = 3;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> ncor = 3;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> cor[6] = {1,2,3,4,5,6};</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> cor2[6] = {10,20,30,40,50,60};</div>
<div class="line">  <span class="keywordtype">char</span> nomcoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;x               y               z               &quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> unicoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1] = <span class="stringliteral">&quot;cm              cm              cm              &quot;</span>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Creation du fichier &quot;test29.med&quot; */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(<span class="stringliteral">&quot;test29.med&quot;</span>,<a class="code" href="a00853_a29a43500a889d39744e184ece0d749be.html#a29a43500a889d39744e184ece0d749be">MODE_ACCES</a>)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la creation du fichier test29.med&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga6007c3f1a62732e7a46c5eca232be78a.html#ga6007c3f1a62732e7a46c5eca232be78a">MEDmeshCr</a>( fid, maa, mdim, mdim, <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1a3719e53a4838d222f0a58148292fda41">MED_UNSTRUCTURED_MESH</a>,</div>
<div class="line">                 <span class="stringliteral">&quot;un maillage pour test29&quot;</span>,<span class="stringliteral">&quot;s&quot;</span>, MED_SORT_DTIT,</div>
<div class="line">                 MED_CARTESIAN, nomcoo, unicoo) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la creation du maillage : &quot;</span>); <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Creation du joint */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01059_gab139ed60d40b7a61416f46eb5ff2dac2.html#gab139ed60d40b7a61416f46eb5ff2dac2">MEDsubdomainJointCr</a>(fid,maa,jnt,des_jnt,dom_dist,maa_distant) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la creation du joint&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Ecriture de la correspondance Noeud, Noeud */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01059_ga78dd95846735f895e33876bf69e1d5a4.html#ga78dd95846735f895e33876bf69e1d5a4">MEDsubdomainCorrespondenceWr</a>(fid,maa,jnt,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                                   <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,ncor,cor) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;ecriture du tableau des correspondances (noeud,noeud)&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Ecriture de la correspondance Noeud Maille */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01059_ga78dd95846735f895e33876bf69e1d5a4.html#ga78dd95846735f895e33876bf69e1d5a4">MEDsubdomainCorrespondenceWr</a>(fid,maa,jnt,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                                   <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,MED_CELL,MED_TRIA3,ncor,cor2) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;ecriture du tableau des correspondances (noeud,maille TRIA3)&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Fermeture du fichier */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la fermeture du fichier&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * - Nom du fichier : test30.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * - Description : lecture des joints d&#39;un maillage MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *****************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef DEF_LECT_ECR</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDWR</span></div>
<div class="line"><span class="preprocessor">#elif DEF_LECT_AJOUT</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDEXT</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_CREAT</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00904_adbe76246e7c3ca09dee31c238d3ce028.html#adbe76246e7c3ca09dee31c238d3ce028">afficheCorres</a>(<a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid, <span class="keywordtype">char</span> *maa, <span class="keywordtype">char</span> *jnt,</div>
<div class="line">                 <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> typ_ent_local,   <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> typ_geo_local,</div>
<div class="line">                 <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> typ_ent_distant, <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> typ_geo_distant,</div>
<div class="line">                 <span class="keywordtype">char</span> *type);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">{</div>
<div class="line">  <a class="code" href="a00577_abd29d7c6abaef5da2a5ed1b73464f0ba.html#abd29d7c6abaef5da2a5ed1b73464f0ba">med_err</a> ret = 0;</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <span class="keywordtype">char</span> maa[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1],maa_dist[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1];</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> mdim,sdim;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> njnt,ncor,ndom,nc;</div>
<div class="line">  <span class="keywordtype">char</span> jnt[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1],corr[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1];</div>
<div class="line">  <span class="keywordtype">char</span> des[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1];</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> nomcoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1];</div>
<div class="line">  <span class="keywordtype">char</span> unicoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1];</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> rep;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> type;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sort;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep=0,njstep=0,nodtitncor=0,nentity=0;</div>
<div class="line">  <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> typ_ent_local,typ_ent_distant;</div>
<div class="line">  <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> typ_geo_local,typ_geo_distant;</div>
<div class="line">  <span class="keywordtype">int</span> i,j,k;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (argc != 2) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Il faut passer un fichier MED en paramètre&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Ouverture du fichier passe en argument en lecture seule */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(argv[1],<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a>)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur à l&#39;ouverture du fichier : &quot;</span>); <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(argv[1]);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ((sdim=<a class="code" href="a01055_gad36ab4651405ed8542fb2a63e2fc44da.html#gad36ab4651405ed8542fb2a63e2fc44da">MEDmeshnAxis</a>(fid, 1)) &lt;0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur à la lecture de la dimension de l&#39;espace du maillage :&quot;</span>);</div>
<div class="line">    <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture des infos concernant le premier maillage */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a>( fid, 1,  maa, &amp;sdim, &amp;mdim, &amp;type, des, dtunit, &amp;sort,</div>
<div class="line">                    &amp;nstep,  &amp;rep, nomcoo,unicoo) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture des informations sur le maillage : &quot;</span>);<a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Maillage de nom : |%s| , de dimension : &quot;</span>IFORMAT<span class="stringliteral">&quot; , et de type %d\n&quot;</span>,maa,mdim,type);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Dimension de l&#39;espace : &quot;</span>IFORMAT<span class="stringliteral">&quot;\n&quot;</span>,sdim);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Description du maillage : |%s|\n&quot;</span>,des);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Noms des axes : |%s|\n&quot;</span>,nomcoo);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Unités des axes : |%s|\n&quot;</span>,unicoo);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Type de repère : %d\n&quot;</span>,rep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Nombre d&#39;étapes de calcul : &quot;</span>IFORMAT<span class="stringliteral">&quot;\n&quot;</span>,nstep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Unité des dates : |%s|\n\n&quot;</span>,dtunit);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture du nombre de joints */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((njnt = <a class="code" href="a01059_ga90067f55ea12412a0688c6c304204e65.html#ga90067f55ea12412a0688c6c304204e65">MEDnSubdomainJoint</a>(fid,maa)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture du nombre de joints&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;Nombre de joints : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,njnt);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture de tous les joints du maillage */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0;i&lt;njnt;i++) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Joint numero : %d \n&quot;</span>,i+1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Lecture des infos sur le joints */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a01059_ga25a6e4dff83d09a8f46ed161136bf44c.html#ga25a6e4dff83d09a8f46ed161136bf44c">MEDsubdomainJointInfo</a>(fid,maa,i+1,jnt,des,&amp;ndom,maa_dist,&amp;njstep,&amp;nodtitncor) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture du joint d&#39;indice&quot;</span>);</div>
<div class="line">      <a class="code" href="a00591_ae7ba0433e91c450cd44c3808c2acb497.html#ae7ba0433e91c450cd44c3808c2acb497">ISCRUTE_int</a>(i+1);</div>
<div class="line">      <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;Nom du joint: |%s| \n&quot;</span>,jnt);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Description du joint      : |%s| \n&quot;</span>,des);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Domaine en regard         : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,ndom);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Maillage distant          : |%s| \n&quot;</span>,maa_dist);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Nombre d&#39;étapes de calcul : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,njstep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Nombre de correspondance pour (NO_DT,NO_IT) : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,nodtitncor);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* lecture des correspondances une par une</span></div>
<div class="line"><span class="comment">       en connaissant leur type a priori */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Lecture de la correspondance Noeud Noeud */</span></div>
<div class="line">    <a class="code" href="a00904_adbe76246e7c3ca09dee31c238d3ce028.html#adbe76246e7c3ca09dee31c238d3ce028">afficheCorres</a>(fid,maa,jnt,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,0,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,0,<span class="stringliteral">&quot;noeud/noeud&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Lecture de la correspondance Noeud Maille */</span></div>
<div class="line">    <a class="code" href="a00904_adbe76246e7c3ca09dee31c238d3ce028.html#adbe76246e7c3ca09dee31c238d3ce028">afficheCorres</a>(fid,maa,jnt,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,0,MED_CELL,MED_TRIA3,<span class="stringliteral">&quot;noeud/TRIA3&quot;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* lecture des correspondances une par une</span></div>
<div class="line"><span class="comment">       sans connaitre leur type a priori</span></div>
<div class="line"><span class="comment">       -&gt; utilisation de la fonction MEDjointTypeCorres */</span></div>
<div class="line"></div>
<div class="line">    ncor=1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> ( ncor &lt;= nodtitncor ) {</div>
<div class="line">      <a class="code" href="a00591_a818470a84d2ad18a3fbb48170296cd95.html#a818470a84d2ad18a3fbb48170296cd95">ISCRUTE</a>(ncor);</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="a01059_gae6262eba284cc7118a1c6b2617d471b4.html#gae6262eba284cc7118a1c6b2617d471b4">MEDsubdomainCorrespondenceSizeInfo</a>(fid,maa,jnt,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,ncor,</div>
<div class="line">                                           &amp;typ_ent_local,&amp;typ_geo_local,&amp;typ_ent_distant,&amp;typ_geo_distant,</div>
<div class="line">                                              &amp;nentity) &lt; 0 ) {</div>
<div class="line">        <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture des infos sur le nombre d&#39;entite en regard&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* Lecture de la correspondance Noeud Noeud */</span></div>
<div class="line">      <a class="code" href="a00904_adbe76246e7c3ca09dee31c238d3ce028.html#adbe76246e7c3ca09dee31c238d3ce028">afficheCorres</a>(fid,maa,jnt,typ_ent_local,typ_geo_local,typ_ent_distant,typ_geo_distant,<span class="stringliteral">&quot;------&quot;</span>);</div>
<div class="line"></div>
<div class="line">      ncor++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Fermeture du fichier */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la fermeture du fichier &quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00904_adbe76246e7c3ca09dee31c238d3ce028.html#adbe76246e7c3ca09dee31c238d3ce028">afficheCorres</a>(<a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid, <span class="keywordtype">char</span> *maa, <span class="keywordtype">char</span> *jnt,</div>
<div class="line">                 <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> typ_ent_local,   <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> typ_geo_local,</div>
<div class="line">                 <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470">med_entity_type</a> typ_ent_distant, <a class="code" href="a00577_a1043613afc3cd2e24785dfc7c0452ab8.html#a1043613afc3cd2e24785dfc7c0452ab8">med_geometry_type</a> typ_geo_distant,</div>
<div class="line">                 <span class="keywordtype">char</span> *type)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nc;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *cortab;</div>
<div class="line">  <span class="keywordtype">int</span> k,ncor,ret=0;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00591_ae7ba0433e91c450cd44c3808c2acb497.html#ae7ba0433e91c450cd44c3808c2acb497">ISCRUTE_int</a>(typ_ent_local);<a class="code" href="a00591_ae7ba0433e91c450cd44c3808c2acb497.html#ae7ba0433e91c450cd44c3808c2acb497">ISCRUTE_int</a>(typ_geo_local);</div>
<div class="line">  <a class="code" href="a00591_ae7ba0433e91c450cd44c3808c2acb497.html#ae7ba0433e91c450cd44c3808c2acb497">ISCRUTE_int</a>(typ_ent_distant);<a class="code" href="a00591_ae7ba0433e91c450cd44c3808c2acb497.html#ae7ba0433e91c450cd44c3808c2acb497">ISCRUTE_int</a>(typ_geo_distant);</div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="a01059_ga47aeb9b5072799cc4a3a0e672ad5d29f.html#ga47aeb9b5072799cc4a3a0e672ad5d29f">MEDsubdomainCorrespondenceSize</a>(fid,maa,jnt,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                                      typ_ent_local,typ_geo_local,typ_ent_distant,typ_geo_distant,</div>
<div class="line">                                      &amp;nc) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture des infos sur le nombre d&#39;entite en regard de type&quot;</span>);</div>
<div class="line">    <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(type);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  printf(<span class="stringliteral">&quot;nb de couples d&#39;entites en regard |%s|: &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,type,nc);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (nc &gt; 0) {</div>
<div class="line">    cortab = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nc*2);</div>
<div class="line">    <span class="keywordflow">if</span> ((ret=<a class="code" href="a01059_ga5170722fcd38ed65987bea79c4ac9d3b.html#ga5170722fcd38ed65987bea79c4ac9d3b">MEDsubdomainCorrespondenceRd</a>(fid,maa,jnt,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                                          typ_ent_local,typ_geo_local,typ_ent_distant,typ_geo_distant,</div>
<div class="line">                                          cortab)) &lt; 0) {</div>
<div class="line">      <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture des correspondances sur &quot;</span>);</div>
<div class="line">      <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(type);</div>
<div class="line">      ret = -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (ret == 0)</div>
<div class="line">      <span class="keywordflow">for</span> (k=0;k&lt;nc;k++)</div>
<div class="line">        printf(<span class="stringliteral">&quot;Correspondance %d : &quot;</span>IFORMAT<span class="stringliteral">&quot; et &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,k+1,*(cortab+2*k),</div>
<div class="line">               *(cortab+2*k+1));</div>
<div class="line">    free(cortab);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * - Nom du fichier : test31.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * - Description : ecriture d&#39;une numerotation globale dans un maillage MED </span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *****************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef DEF_LECT_ECR</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDWR</span></div>
<div class="line"><span class="preprocessor">#elif DEF_LECT_AJOUT</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDEXT</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_CREAT</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">{</div>
<div class="line">  <a class="code" href="a00577_abd29d7c6abaef5da2a5ed1b73464f0ba.html#abd29d7c6abaef5da2a5ed1b73464f0ba">med_err</a> ret = 0;</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> mdim,sdim;</div>
<div class="line">  <span class="comment">/* nom du maillage de longueur maxi MED_NAME_SIZE */</span></div>
<div class="line">  <span class="keywordtype">char</span> maa[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1];</div>
<div class="line">  <span class="comment">/* le nombre de noeuds */</span></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnoe = 0;</div>
<div class="line">  <span class="comment">/* table des numeros global */</span></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *numglobalnoe=NULL;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* variable de stockage pour reperer le maillage */</span></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> i;</div>
<div class="line">  <span class="keywordtype">char</span> des[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> nomcoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> unicoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> rep;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> type;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sort;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep=0;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> chgt=<a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a>,trsf=<a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (argc != 2) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Il faut passer un fichier MED en param�tre&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Ouverture du fichier passe en argument */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(argv[1],<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85ab53f10a6b700d1087d7a50710fe29f00">MED_ACC_RDWR</a>)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;ouverture du fichier : &quot;</span>); <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(argv[1]);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ((sdim=<a class="code" href="a01055_gad36ab4651405ed8542fb2a63e2fc44da.html#gad36ab4651405ed8542fb2a63e2fc44da">MEDmeshnAxis</a>(fid, 1)) &lt;0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur � la lecture de la dimension de l&#39;espace du maillage :&quot;</span>);</div>
<div class="line">    <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture des infos concernant le premier maillage */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a>( fid, 1,  maa, &amp;sdim, &amp;mdim, &amp;type, des, dtunit, &amp;sort,</div>
<div class="line">                    &amp;nstep,  &amp;rep, nomcoo,unicoo) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture des informations sur le maillage : &quot;</span>);<a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Maillage de nom : |%s| , de dimension : &quot;</span>IFORMAT<span class="stringliteral">&quot; , et de type %d\n&quot;</span>,maa,mdim,type);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Dimension de l&#39;espace : &quot;</span>IFORMAT<span class="stringliteral">&quot;\n&quot;</span>,sdim);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Description du maillage : %s\n&quot;</span>,des);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Noms des axes : %s\n&quot;</span>,nomcoo);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Unit�s des axes : %s\n&quot;</span>,unicoo);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Type de rep�re : %d\n&quot;</span>,rep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Nombre d&#39;�tapes de calcul : &quot;</span>IFORMAT<span class="stringliteral">&quot;\n&quot;</span>,nstep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Unit� des dates : %s\n\n&quot;</span>,dtunit);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture du nombre de noeuds */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( (nnoe = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,maa,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                              <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>,MED_NO_CMODE,</div>
<div class="line">                              &amp;chgt,&amp;trsf)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture du nombre de noeuds &quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;Nombre de noeuds : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,nnoe);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Allocations memoires */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* table de la numerotation globale</span></div>
<div class="line"><span class="comment">     profil : (nombre de noeuds ) */</span></div>
<div class="line">  <span class="keywordflow">if</span> (nnoe &gt; 0) {</div>
<div class="line">    numglobalnoe = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nnoe);</div>
<div class="line">    <span class="keywordflow">for</span> (i=0;i&lt;nnoe;i++) {</div>
<div class="line">      numglobalnoe[i]=i+100;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* ecriture de la numerotation globale */</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_ga7368d6375462e4390041bae334cfcb43.html#ga7368d6375462e4390041bae334cfcb43">MEDmeshGlobalNumberWr</a>(fid,maa,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,nnoe,numglobalnoe)&lt;0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;&#39;ecriture de la numerotation globale&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  free(numglobalnoe);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Fermeture du fichier */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la fermeture du fichier&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/*  This file is part of MED.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  COPYRIGHT (C) 1999 - 2019  EDF R&amp;D, CEA/DEN</span></div>
<div class="line"><span class="comment"> *  MED is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *  it under the terms of the GNU Lesser General Public License as published by</span></div>
<div class="line"><span class="comment"> *  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *  (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  MED is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *  GNU Lesser General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *  You should have received a copy of the GNU Lesser General Public License</span></div>
<div class="line"><span class="comment"> *  along with MED.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * - Nom du fichier : test32.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * - Description : lecture nominale d&#39;une numerotation globale dans un maillage MED </span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *****************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00577.html">med.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define MESGERR 1</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00591.html">med_utils.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef DEF_LECT_ECR</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDWR</span></div>
<div class="line"><span class="preprocessor">#elif DEF_LECT_AJOUT</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_RDEXT</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#define MODE_ACCES MED_ACC_CREAT</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="a00853_a3c04138a5bfe5d72780bb7e82a18e627.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">{</div>
<div class="line">  <a class="code" href="a00577_abd29d7c6abaef5da2a5ed1b73464f0ba.html#abd29d7c6abaef5da2a5ed1b73464f0ba">med_err</a> ret = 0;</div>
<div class="line">  <a class="code" href="a00577_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> mdim,sdim;</div>
<div class="line">  <span class="keywordtype">char</span> maa[<a class="code" href="a00577_a0ae989cbbfeecbb5296b3ceba8dab886.html#a0ae989cbbfeecbb5296b3ceba8dab886">MED_NAME_SIZE</a>+1];</div>
<div class="line">  <span class="comment">/* le nombre de noeuds */</span></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nnoe = 0;</div>
<div class="line">  <span class="comment">/* table des numeros global */</span></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> *numglobalnoe=NULL;</div>
<div class="line">  <span class="comment">/* variable de stockage pour reperer le maillage */</span></div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> i;</div>
<div class="line">  <span class="keywordtype">char</span> des[<a class="code" href="a00577_ab69710ecf9f5257080a943579852d0f0.html#ab69710ecf9f5257080a943579852d0f0">MED_COMMENT_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> dtunit[<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> nomcoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <span class="keywordtype">char</span> unicoo[3*<a class="code" href="a00577_a213ecd1a546eb96092b980a870bc386b.html#a213ecd1a546eb96092b980a870bc386b">MED_SNAME_SIZE</a>+1]=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">  <a class="code" href="a00577_a57867e4bed1d104c865cfc9d23c9204d.html#a57867e4bed1d104c865cfc9d23c9204d">med_axis_type</a> rep;</div>
<div class="line">  <a class="code" href="a00577_a821a4dd94c5c6b095318432bdec8d8a1.html#a821a4dd94c5c6b095318432bdec8d8a1">med_mesh_type</a> type;</div>
<div class="line">  <a class="code" href="a00577_a5b97067a30629cd60470d074691d6798.html#a5b97067a30629cd60470d074691d6798">med_sorting_type</a> sort;</div>
<div class="line">  <a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nstep=0;</div>
<div class="line">  <a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a> chgt=<a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a>,trsf=<a class="code" href="a00577_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (argc != 2) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Il faut passer un fichier MED en param�tre&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Ouverture du fichier passe en argument */</span></div>
<div class="line">  <span class="keywordflow">if</span> ((fid = <a class="code" href="a01049_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a>(argv[1],<a class="code" href="a00577_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85ab53f10a6b700d1087d7a50710fe29f00">MED_ACC_RDWR</a>)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a l&#39;ouverture du fichier : &quot;</span>); <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(argv[1]);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ((sdim=<a class="code" href="a01055_gad36ab4651405ed8542fb2a63e2fc44da.html#gad36ab4651405ed8542fb2a63e2fc44da">MEDmeshnAxis</a>(fid, 1)) &lt;0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur � la lecture de la dimension de l&#39;espace du maillage :&quot;</span>);</div>
<div class="line">    <a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture des infos concernant le premier maillage */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="a01055_ga71e0d79fbb40abdc9c20bc5be01441ac.html#ga71e0d79fbb40abdc9c20bc5be01441ac">MEDmeshInfo</a>( fid, 1,  maa, &amp;sdim, &amp;mdim, &amp;type, des, dtunit, &amp;sort,</div>
<div class="line">                    &amp;nstep,  &amp;rep, nomcoo,unicoo) &lt; 0 ) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture des informations sur le maillage : &quot;</span>);<a class="code" href="a00591_a257959db0a78623caa051d11ceb2f8cb.html#a257959db0a78623caa051d11ceb2f8cb">SSCRUTE</a>(maa);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Maillage de nom : |%s| , de dimension : &quot;</span>IFORMAT<span class="stringliteral">&quot; , et de type %d\n&quot;</span>,maa,mdim,type);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Dimension de l&#39;espace : &quot;</span>IFORMAT<span class="stringliteral">&quot;\n&quot;</span>,sdim);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Description du maillage : %s\n&quot;</span>,des);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Noms des axes : %s\n&quot;</span>,nomcoo);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Unit�s des axes : %s\n&quot;</span>,unicoo);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Type de rep�re : %d\n&quot;</span>,rep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Nombre d&#39;�tapes de calcul : &quot;</span>IFORMAT<span class="stringliteral">&quot;\n&quot;</span>,nstep);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t -Unit� des dates : %s\n\n&quot;</span>,dtunit);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Lecture du nombre de noeuds */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( (nnoe = <a class="code" href="a01055_ga45758103360dacf7b8a6c53ebfa4d7e5.html#ga45758103360dacf7b8a6c53ebfa4d7e5">MEDmeshnEntity</a>(fid,maa,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,</div>
<div class="line">                              <a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,<a class="code" href="a00577_a25ee4b3675737fc23511b28b3245c61b.html#a25ee4b3675737fc23511b28b3245c61bad78949eab3c743083dfbf687c92bbdcb">MED_COORDINATE</a>,MED_NO_CMODE,</div>
<div class="line">                              &amp;chgt,&amp;trsf)) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture du nombre de noeuds &quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;Nombre de noeuds : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,nnoe);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Allocations memoires */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* table de la numerotation globale</span></div>
<div class="line"><span class="comment">     profil : (nombre de noeuds ) */</span></div>
<div class="line">  <span class="keywordflow">if</span> (nnoe &gt; 0) {</div>
<div class="line">    numglobalnoe = (<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="a00577_a88dc15143f934cc7b771bc89f46372dc.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a>)*nnoe);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* lecture de la numerotation globale attachee aux noeuds*/</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01055_gab28f41670fee25385d66d45a0d86d93f.html#gab28f41670fee25385d66d45a0d86d93f">MEDmeshGlobalNumberRd</a>(fid,maa,<a class="code" href="a00577_a8f72b6ceb3b6f5a67f9efd46cb90707a.html#a8f72b6ceb3b6f5a67f9efd46cb90707a">MED_NO_DT</a>,MED_NO_IT,<a class="code" href="a00577_aab0e957294723517d5c3641bb71b0470.html#aab0e957294723517d5c3641bb71b0470a074507163b07b6d764823a78c5c07f0f">MED_NODE</a>,MED_NONE,numglobalnoe)&lt;0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la lecture de de la numerotation globale&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* ecriture a l&#39;ecran des resultats */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i=0;i&lt;nnoe;i++)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Numero global du noeud &quot;</span>IFORMAT<span class="stringliteral">&quot; : &quot;</span>IFORMAT<span class="stringliteral">&quot; \n&quot;</span>,i+1,numglobalnoe[i]);</div>
<div class="line"></div>
<div class="line">  free(numglobalnoe);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Fermeture du fichier */</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a01049_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>(fid) &lt; 0) {</div>
<div class="line">    <a class="code" href="a00591_a3756046b0a6a7e51b8eb544d0d77c17c.html#a3756046b0a6a7e51b8eb544d0d77c17c">MESSAGE</a>(<span class="stringliteral">&quot;Erreur a la fermeture du fichier &quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --><p><br />
<br />
 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré le Lundi 10 Décembre 2018 18:40:48 pour MED fichier par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
